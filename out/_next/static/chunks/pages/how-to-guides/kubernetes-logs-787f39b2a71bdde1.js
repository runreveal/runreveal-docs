(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3162],{96867:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/how-to-guides/kubernetes-logs",function(){return s(57574)}])},57574:function(e,n,s){"use strict";s.r(n),s.d(n,{useTOC:function(){return o}});var r=s(85893),t=s(37812),a=s(84854),i=s(79299);function o(e){return[{value:"Setup",id:"setup",depth:2}]}n.default=(0,t.c)(function(e){let{toc:n=o(e)}=e,s={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",span:"span",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{children:"Kubernetes Logs"}),"\n",(0,r.jsxs)(s.p,{children:["To get kubernetes logs into runreveal, we’ve built an agent called reveald that\ncan be run as a daemonset that consumes the pod logs from the host, according to\nthe kubernetes log interface.  For more information on the kubernetes log\ninterface, see ",(0,r.jsx)(s.a,{href:"https://kubernetes.io/docs/concepts/cluster-administration/logging/",children:"the official\nguide"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:n[0].id,children:n[0].value}),"\n",(0,r.jsxs)(s.p,{children:["Every kubernetes cluster is different.  However, the guide linked above\nrecommends that pods log to ",(0,r.jsx)(s.code,{children:"/var/log/pods"})," for compatibility with the widest\nnumber of logging agents.  That said, it’s still possible for the runtime to\nintercept the pods’ logs and send them to a different location."]}),"\n",(0,r.jsxs)(s.p,{children:["This guide assumes the logs are being written to ",(0,r.jsx)(s.code,{children:"/var/log/pods"})," from the\ncontainer runtime on the host."]}),"\n",(0,r.jsx)(s.p,{children:"From there, we can create a daemonset that runs the reveald agent on every node."}),"\n",(0,r.jsx)(s.pre,{tabIndex:"0","data-language":"plaintext","data-word-wrap":"",children:(0,r.jsx)(s.code,{children:(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:"# daemonset config"})})})}),"\n",(0,r.jsx)(s.p,{children:"The reveald config will look something like this:"}),"\n",(0,r.jsx)(s.pre,{tabIndex:"0","data-language":"plaintext","data-word-wrap":"",children:(0,r.jsxs)(s.code,{children:[(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:"{"})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:'  "sources": {'})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:"    // The keys here are the identifiers for the sources, and are used to"})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:"    // refernece them when logging or in metrics."})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:'    "kubernetes": {'})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:'      "type": "file",'})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:'      "path": "/var/log/pods/",'})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:'      "extension": ".log",'})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:"    },"})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:"  },"})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:'  "destinations": {'})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:'    "runreveal": {'})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:'      "type": "runreveal",'})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:"      // Replace this webhook URL with your own, created on https://app.runreveal.com"})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:'      // as a "Reveald" type source'})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:'      "webhookURL": "https://example.api.runreveal.com/sources/kawa/webhook/0123456789",'})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:"      // You can also use environment variables by referencing them with a"})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:"      // dollar sign. The value must be quoted, start with a dollar sign and be"})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:"      // a valid environment variable name"})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:'      // "webhookURL": "$WEBHOOK_URL",'})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:"    },"})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:'    // "lumbermill": {'})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:'    //  "type": "s3",'})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:'    //  "bucketName": "the-lumber-mill",'})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:'    //  "bucketRegion": "us-west-2",'})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:"    // },"})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:"  },"})}),"\n",(0,r.jsx)(s.span,{children:(0,r.jsx)(s.span,{children:"}"})})]})}),"\n",(0,r.jsx)(s.p,{children:"After you’ve deployed this daemonset to your cluster, you should begin to see\nlogs arriving in runreveal, assuming the network has been configured to allow\noutbound internet connections from the reveald pods and kubernetes cluster."})]})},"/how-to-guides/kubernetes-logs",{filePath:"pages/how-to-guides/kubernetes-logs.mdx",timestamp:1750451516e3,pageMap:a.v,frontMatter:{title:"Kubernetes Logs",description:"Deploy Reveald as a Kubernetes daemonset to collect pod logs. Configure log collection from container runtime and monitor application activity across your cluster."},title:"Kubernetes Logs"},"undefined"==typeof RemoteContent?o:RemoteContent.useTOC)}},function(e){e.O(0,[7812,4854,2888,9774,179],function(){return e(e.s=96867)}),_N_E=e.O()}]);