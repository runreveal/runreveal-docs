(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3669],{14234:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sources/source-types/azure/azure-flow",function(){return t(32169)}])},32169:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return u},useTOC:function(){return d}});var o=t(85893),n=t(37812),l=t(84854),a=t(79299),s={src:"/_next/static/media/azure-flow-rr-setup.65235dd7.png",height:780,width:1225,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAASFBMVEX///7+///+//3+/v/9/v/9/f/9/f79/f38/f78/P78/Pz7+/z7+/v7+v76+vv3+Pn19vj09PTz9PXy8vTx8vLx8fHq7vHw6P1YO6DuAAAALUlEQVR42mMQExUR5GbiFWcQ5uPi5mFnZGDgZ2ZhYWFl42AQ4IAABiFONjAAACfZAYQmgNLJAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:5},i=t(95956);function d(e){return[{value:"Ingest Method",id:"ingest-method",depth:2},{value:"Virtual Net Flow Log Forwarding",id:"virtual-net-flow-log-forwarding",depth:2},{value:"RunReveal Source",id:"runreveal-source",depth:2}]}var u=(0,n.c)(function(e){let{toc:r=d(e)}=e,t={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",ul:"ul",...(0,a.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{children:"Azure Flow Logs"}),"\n",(0,o.jsx)(i.U,{type:"warning",children:(0,o.jsxs)(t.p,{children:["Previously known as NSG Flow logs, Microsoft deprecated NSG flow logs on June 30, 2025 and plans to retire them on September 30, 2027.\nIn order to migrate to the new Azure Flow (also known as Virtual Net Flow) logs please follow Microsoft’s documentation for migration, ",(0,o.jsx)(t.a,{href:"https://learn.microsoft.com/en-us/azure/network-watcher/nsg-flow-logs-migrate",children:"https://learn.microsoft.com/en-us/azure/network-watcher/nsg-flow-logs-migrate"}),"."]})}),"\n",(0,o.jsx)(t.p,{children:"Virtual net flow logs control inbound and outbound traffic to and from Azure resources by defining security rules based on IP address, port, and protocol. Virtual net flow logs capture information about network traffic, including source and destination IP addresses, ports, protocols, and whether traffic was allowed or denied. These logs are useful for monitoring network traffic, troubleshooting connectivity issues, and enhancing network security by detecting suspicious or unauthorized traffic patterns."}),"\n",(0,o.jsx)(t.h2,{id:r[0].id,children:r[0].value}),"\n",(0,o.jsx)(t.p,{children:"Setup the ingestion of this source using the following guide."}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.a,{href:"/sources/object-storage/azure",children:"Azure Blob Storage"})}),"\n",(0,o.jsx)(t.h2,{id:r[1].id,children:r[1].value}),"\n",(0,o.jsx)(t.p,{children:"With the storage account created you can now setup Virtual net flow logs to export to it."}),"\n",(0,o.jsxs)(t.p,{children:["Follow along with Microsoft’s documentation on the exact steps required to create a new flow log.\n",(0,o.jsx)(t.a,{href:"https://learn.microsoft.com/en-us/azure/network-watcher/vnet-flow-logs-manage?tabs=portal#create-a-flow-log",children:"https://learn.microsoft.com/en-us/azure/network-watcher/vnet-flow-logs-manage?tabs=portal#create-a-flow-log"})]}),"\n",(0,o.jsx)(t.h2,{id:r[2].id,children:r[2].value}),"\n",(0,o.jsxs)(t.p,{children:["Go to RunReveal and add a new source selecting ",(0,o.jsx)(t.a,{href:"https://app.runreveal.com/dash/sources/add/azure-flow",children:"Azure Flow Logs"}),"."]}),"\n",(0,o.jsx)(t.p,{children:"Give the source a name and fill in the remaining fields with the saved values from setup."}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"azure blob",placeholder:"blur",src:s})}),"\n",(0,o.jsx)(t.p,{children:"You will need the values that were saved from the setup steps."}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["The app ",(0,o.jsx)(t.code,{children:"Tenant ID"})," and ",(0,o.jsx)(t.code,{children:"Client ID"})," from the app registration screen."]}),"\n",(0,o.jsxs)(t.li,{children:["The ",(0,o.jsx)(t.code,{children:"Client Secret Value"})," that was created when generating a new secret for the app."]}),"\n",(0,o.jsxs)(t.li,{children:["The ",(0,o.jsx)(t.code,{children:"Storage Account Name"})," where the logs are exporting to."]}),"\n",(0,o.jsxs)(t.li,{children:["The ",(0,o.jsx)(t.code,{children:"Storage Queue Name"})," that holds the blob created notifications."]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"Once these are supplied and saved, RunReveal will begin to process messages in the queue and then ingest logs stored in the bucket."}),"\n",(0,o.jsx)(i.U,{type:"info",children:(0,o.jsx)(t.p,{children:"Because of how Microsoft exports flow logs to storage accounts, logs are usually delayed until the top of the next hour."})})]})},"/sources/source-types/azure/azure-flow",{filePath:"pages/sources/source-types/azure/azure-flow.mdx",timestamp:1750451649e3,pageMap:l.v,frontMatter:{title:"Azure Flow Logs",description:"Collect Azure Virtual Network Flow logs for network traffic monitoring. Track inbound and outbound traffic patterns, security rule evaluations, and network connectivity for comprehensive Azure network visibility."},title:"Azure Flow Logs"},"undefined"==typeof RemoteContent?d:RemoteContent.useTOC)},95956:function(e,r,t){"use strict";t.d(r,{U:function(){return i}});var o=t(85893),n=t(90512),l=t(45192);let a={default:"\uD83D\uDCA1",error:"\uD83D\uDEAB",info:(0,o.jsx)(l.AV,{className:"_mt-1"}),warning:"⚠️"},s={default:(0,n.Z)("_border-orange-100 _bg-orange-50 _text-orange-800 dark:_border-orange-400/30 dark:_bg-orange-400/20 dark:_text-orange-300"),error:(0,n.Z)("_border-red-200 _bg-red-100 _text-red-900 dark:_border-red-200/30 dark:_bg-red-900/30 dark:_text-red-200"),info:(0,n.Z)("_border-blue-200 _bg-blue-100 _text-blue-900 dark:_border-blue-200/30 dark:_bg-blue-900/30 dark:_text-blue-200"),warning:(0,n.Z)("_border-yellow-100 _bg-yellow-50 _text-yellow-900 dark:_border-yellow-200/30 dark:_bg-yellow-700/30 dark:_text-yellow-200")};function i({children:e,type:r="default",emoji:t=a[r]}){return(0,o.jsxs)("div",{className:(0,n.Z)("nextra-callout _overflow-x-auto _mt-6 _flex _rounded-lg _border _py-2 ltr:_pr-4 rtl:_pl-4","contrast-more:_border-current contrast-more:dark:_border-current",s[r]),children:[(0,o.jsx)("div",{className:"_select-none _text-xl ltr:_pl-3 ltr:_pr-2 rtl:_pr-3 rtl:_pl-2",style:{fontFamily:'"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"'},children:t}),(0,o.jsx)("div",{className:"_w-full _min-w-0 _leading-7",children:e})]})}}},function(e){e.O(0,[7812,4854,2888,9774,179],function(){return e(e.s=14234)}),_N_E=e.O()}]);