(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1256],{59497:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sources/source-types/azure/activity-logs",function(){return o(85369)}])},85369:function(e,t,o){"use strict";o.r(t),o.d(t,{useTOC:function(){return h}});var n=o(85893),r=o(37812),i=o(84854),s=o(79299),a=o(57703),u=o(42033),c=o(95956);function h(e){return[{value:"Ingest Method",id:"ingest-method",depth:2},{value:"EventHub Creation",id:"eventhub-creation",depth:3},{value:"Export Logs to Event Hub",id:"export-logs-to-event-hub",depth:3},{value:"RunReveal Source",id:"runreveal-source",depth:3},{value:"Connect Everything Together",id:"connect-everything-together",depth:3}]}function l(e,t){throw Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}t.default=(0,r.c)(function(e){let{toc:t=h(e)}=e,o={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",ul:"ul",...(0,s.a)(),...e.components};return a.m||l("Tabs",!1),a.m.Tab||l("Tabs.Tab",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.h1,{children:"Azure Activity Logs"}),"\n",(0,n.jsx)(o.p,{children:"Azure Activity Logs provide a record of operations performed on Azure resources, offering insights into control plane actions such as resource creation, modification, and deletion. These logs include details like the user who initiated the action, the timestamp, and the result of the operation. Azure Activity Logs are crucial for auditing changes, monitoring resource management, and ensuring compliance with organizational governance and security policies."}),"\n",(0,n.jsx)(o.h2,{id:t[0].id,children:t[0].value}),"\n",(0,n.jsx)(o.p,{children:"Azure activity logs can be ingested using either an Azure storage bucket or pushed to RunReveal using a webhook."}),"\n",(0,n.jsx)(o.p,{children:"Azure storage buckets are inherently cheaper than using the webhook method but logs can be delayed by up to an hour. The webhook ingestion\nimports logs as soon as they are generated, but using event hubs to forward every event can become more expensive if there are lots of logs."}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsx)(o.li,{children:(0,n.jsx)(o.a,{href:"/sources/object-storage/azure",children:"Azure Blob Storage"})}),"\n",(0,n.jsx)(o.li,{children:(0,n.jsx)(o.a,{href:"#webhook-ingestion",children:"Webhook Ingestion"})}),"\n"]}),"\n",(0,n.jsxs)(a.m,{items:["Azure Blob Storage","Webhook Ingestion"],defaultIndex:"0",children:[(0,n.jsxs)(a.m.Tab,{children:[(0,n.jsx)(o.p,{children:"After creating your storage account and other resources, you will need to setup activity logs to forward to it."}),(0,n.jsx)(o.p,{children:"On the Activity Log resource page, click on the “Export Activity Logs” button."}),(0,n.jsx)("img",{src:"/azure/azure-3.avif"}),(0,n.jsx)(o.p,{children:"On the diagnostic settings page, add a new diagnostic setting. Give the diagnostic setting a name, choose the categories you wish to include in your events, and select “Archive to a storage account” selecting the storage account that was created."}),(0,n.jsx)("img",{src:"/azure/azure-blob-log-export.png"})]}),(0,n.jsx)(a.m.Tab,{children:(0,n.jsxs)(u.R,{children:[(0,n.jsx)(o.h3,{id:t[1].id,children:t[1].value}),(0,n.jsx)(o.p,{children:"The first step in setting up Azure Activity logs is to create an event hub."}),(0,n.jsx)(o.p,{children:"An event hub needs an event hub namespace, if you don’t already have one that you want to use, you will need to create that first."}),(0,n.jsx)("img",{src:"/azure/azure-1.avif"}),(0,n.jsx)(o.p,{children:"Follow the steps in Azure to create a namespace in your resource group giving it a name. This name will be needed when setting up your Azure function."}),(0,n.jsx)(o.p,{children:"After creating the namespace, create a new event hub inside it. Save the name you give to it as it will be needed later. "}),(0,n.jsx)("img",{src:"/azure/azure-2.avif"}),(0,n.jsx)(o.p,{children:"At this point you can now setup Azure to export logs to your event hubs, but you can also setup different access policies or consumer groups for your event hubs as required by your organization."}),(0,n.jsx)(o.h3,{id:t[2].id,children:t[2].value}),(0,n.jsx)(o.p,{children:"With the event hub in place you can now setup Activity Logs to export to it. Pick and choose which type of log you want imported to RunReveal."}),(0,n.jsx)(o.p,{children:"On the Activity Log resource page, click on the “Export Activity Logs” button."}),(0,n.jsx)("img",{src:"/azure/azure-3.avif"}),(0,n.jsx)(o.p,{children:"On the diagnostic settings page, add a new diagnostic setting. Give the diagnostic setting a name, choose the categories you wish to include in your events, and select “Stream to an event hub” filling in the details with the event hub that was created."}),(0,n.jsx)("img",{src:"/azure/azure-4.avif"}),(0,n.jsx)(o.h3,{id:t[3].id,children:t[3].value}),(0,n.jsx)(o.p,{children:"In order for your RunReveal workspace to accept the log you will first need to create the source."}),(0,n.jsxs)(o.p,{children:["Create a new ",(0,n.jsx)(o.code,{children:"Azure Activity Log"})," source and select the ",(0,n.jsx)(o.code,{children:"Webhook"})," ingest method."]}),(0,n.jsx)(o.p,{children:"Once you have created the source, make note of the Webhook URL that was generated. This will be used when setting up your Azure function."}),(0,n.jsx)(o.h3,{id:t[4].id,children:t[4].value}),(0,n.jsxs)(o.p,{children:["The final step is to create an Azure function that will trigger when new messages are sent to the event hub, and forward them to your RunReveal source. Luckily we have an easy to use template to help with that. Navigate to our ",(0,n.jsx)(o.a,{href:"https://github.com/runreveal/azure-functions-runreveal",children:"GitHub repo"})," to view the source code of the Azure Function getting deployed. Click on the below button to automatically load the template into Azure."]}),(0,n.jsx)(o.p,{children:(0,n.jsx)(o.a,{href:"https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Frunreveal%2Fazure-functions-runreveal%2Fmain%2Fdeploy%2FazureDeploy.json/createUIDefinitionUri/https%3A%2F%2Fraw.githubusercontent.com%2Frunreveal%2Fazure-functions-runreveal%2Fmain%2Fdeploy%2FazureDeploy.portal.json",children:(0,n.jsx)(o.img,{src:"https://aka.ms/deploytoazurebutton",alt:"Deploy to Azure"})})}),(0,n.jsx)(o.p,{children:"To get started fill in the Subscription, resource group, and function name. Select the event hub namespace where the logs are sent and the access policy that will be used to read events. The GitHub repo and branch are used to download the function source code. Keep these default unless you plan to fork the repo to your own GitHub account."}),(0,n.jsx)(o.p,{children:"If you plan to import Activity Logs, check the “Enable Activity Log Event Hub Functions” box to bring up the options for Activity Logs. Fill in the RunReveal webhook URL that was obtained earlier when creating your source. Then select the event hub and consumer group that are being used to store the activity logs."}),(0,n.jsx)(o.p,{children:"If you plan to Import Entra Logs, check the “Enable Entra Log Event Hub Functions” box to bring up the options for Entra Logs. Fill in the RunReveal webhook URL that was obtained earlier when creating your source. Then select the event hub and consumer group that are being used to store the Entra logs."}),(0,n.jsx)(c.U,{type:"info",children:(0,n.jsx)(o.p,{children:"When filling in the webhooks for Azure Activity Logs and Entra Logs, make sure to use the correct URL for that source. Mixing up the URLs or creating the wrong type of source will cause most if not all of your logs to fail to import."})}),(0,n.jsx)(o.p,{children:"Add any required tags to your setup, then review the settings. Once created Azure will begin the deployment of the function. This may take a few minutes, but when complete logs should begin flowing to RunReveal."}),(0,n.jsx)(c.U,{type:"info",children:(0,n.jsx)(o.p,{children:"Azure may take some time before they start to forward events to your Azure function. If a few hours have gone by and you have not seen any logs appear in your RunReveal account reach out to us to for some help."})})]})})]})]})},"/sources/source-types/azure/activity-logs",{filePath:"pages/sources/source-types/azure/activity-logs.mdx",timestamp:1750451516e3,pageMap:i.v,frontMatter:{title:"Azure Activity Logs",description:"Collect Azure Activity Logs for comprehensive resource monitoring and audit trails. Track control plane operations, resource changes, and administrative actions across your Azure infrastructure."},title:"Azure Activity Logs"},"undefined"==typeof RemoteContent?h:RemoteContent.useTOC)}},function(e){e.O(0,[7812,3697,4854,2888,9774,179],function(){return e(e.s=59497)}),_N_E=e.O()}]);