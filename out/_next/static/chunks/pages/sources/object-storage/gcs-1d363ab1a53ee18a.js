(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[176],{61186:function(e,i,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sources/object-storage/gcs",function(){return t(6148)}])},6148:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return E},useTOC:function(){return y}});var n=t(85893),s=t(37812),r=t(84854),a=t(79299),c={src:"/_next/static/media/gcp-poll-1.59dd0902.png",height:1238,width:1156,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAIAAAC6ZnJRAAAAcElEQVR42j2NUQ4DIQhEuf8Vm/QG1Sq4goh21jT7vibDy0Bmfh0iYu+9DtSappSY2d3jzyL3UUoZY8wDAs7U1T6ppsz5KyLKgsLhTmmGHdhYnrHuBVWtt4B2mGnExE9iFubae78OCFin1ztDhfIQET8U1qL0a8gBSwAAAABJRU5ErkJggg==",blurWidth:7,blurHeight:8},o={src:"/_next/static/media/gcp-poll-3.68c1fa90.png",height:1642,width:2050,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAAbElEQVR42iWNSw7CMAxE/U2RyqIcKZfN/WBJ6gxD+xaW/OzR6BjD3auq934crwVkOAm9ENG1VmYCuE2YGbhwfuf5efMc+1NbBu2cp7tpZj12U4HJPyFibdsEq+DhHkEtJFhrUKBoW3MB+A/IDyEVMmclkvM2AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:6},l={src:"/_next/static/media/gcp-poll-7.259a1a8d.png",height:1072,width:606,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAICAMAAAAGL8UJAAAANlBMVEX////+/v79/f38/Pz7+/v6+vv6+vr5+fn4+Pj39/n39/f29vb19fX09fX09PTz8/Tz8/Px8fGbna5NAAAAL0lEQVR42gWAARKAIAgEl5OCjEj//1mHqgyxV96DDsno/bh4y4fxr7zEnI7xdYYOHtcBNkALyPoAAAAASUVORK5CYII=",blurWidth:5,blurHeight:8},d={src:"/_next/static/media/gcp-poll-8.5970d8d6.png",height:748,width:608,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAIAAAC6ZnJRAAAAc0lEQVR42j2MQQ7DMAgE/f9nRo3VqpXammAwEAiOlCx7GrRTEBEA2gwws4i4e0mUj04jm8hUJ22wdSKPyNruWfco7fmCZcF1xVpNVER3s7K1lmIhFiK9Dd8fvD9/wJHbPDsVpfcBQGYWVyZ9VOQxkV+JiAPMv6L0XkisDwAAAABJRU5ErkJggg==",blurWidth:7,blurHeight:8},h={src:"/_next/static/media/gcp-poll-2.7308cf9c.png",height:1122,width:1844,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAZ0lEQVR42jXMOwrAIBBFUfe/DH8YFYbgCmKri7BTC9OZSmImhhwYprjwiFKbwts0Mj9rLWGM4cs511pLKa21lBKlFIMA2Hu/7mXOiU1KSYSQzrkxxnx94eScE9wBgBBCjDEsh/fG6Ad5Pl5day81/gAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:5},A={src:"/_next/static/media/gcp-federated-1.29b755e9.png",height:513,width:1311,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAIAAAAhqtkfAAAAN0lEQVR42jWLyQ0AIAzDuv+6KNBbpEj44YejiKq6h5GxZ2ZE0ALAuTyqionublnQc2xv8DPpcwFO1kZ5t33hNQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:3},u={src:"/_next/static/media/gcp-create-pool-1.00276367.png",height:549,width:585,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAdklEQVR42lXKSQ7DMAhAUd//qFXj1AMGM7kUqYu8DYJPYRYAmImINLl7GQN6iiB/vzCBaq3XdbXWENdatLecc0r0T8ocYt5xLMzce/xiLKqS2MwiSL1H6wuWIAmRIiqLFSR9vUfvA3HvLSIWVzUvLDqB3e08fQFEVrmrEV92xQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},p={src:"/_next/static/media/gcp-create-pool-2.d216a050.png",height:689,width:651,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAZlBMVEX////+/v7+/v39/f79/f39/fz8/Pz7+/z7+/v6+vv5+fv5+fr5+fn4+fn4+Pr49/f29/v39/f39/b19vr09fn19fb19fX09fXz9Pj09PTz8/by8/jy8/fy8vLy8vHx8fHw8PDs7fLBxzfCAAAAQklEQVR42gWABRKAIBAAlxAOxcTCxP9/0qHNeRMxiuN+o60U7OWJEgw0i3VeHMTilNYauu9MaR4gXLX33sC4Tj2gfnLkAukRBeKiAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},g={src:"/_next/static/media/gcp-create-pool-3.9c48c47c.png",height:1102,width:637,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAICAIAAAC+k6JsAAAAWUlEQVR42i2MWRLAIAhDvf9Zu6psglBsm8nPSzIpgNhaE5E5p7uXu/brOscYPyNRf0VEmRQAYGboiMjuUXKpqvt21No9FpvaVLV0JDMLAGqS2fcvvhSebcQDF8x0y4WdyaUAAAAASUVORK5CYII=",blurWidth:5,blurHeight:8},x={src:"/_next/static/media/gcp-grant-access-1.4df50a2e.png",height:503,width:1209,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAIAAAAhqtkfAAAANUlEQVR42j3ISQ4AMAgCQP//YMSltsRDSQhkzN0BVDeZmdoDOEmrqoiQtWwj0TdV/nVm7uYBTRRGm0Ix8IMAAAAASUVORK5CYII=",blurWidth:8,blurHeight:3},j={src:"/_next/static/media/gcp-grant-access-2.f802e55e.png",height:809,width:564,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAICAIAAABVpBlvAAAAaElEQVR42i2MQRLDIAwD+f9DOz1kAhhwBAZcNYkuljQrB1UtpYhIawqMtVZQbTlnVnd7mVnofRDsPIPI/FNcxRhTyjS1VgCshAF92K2XeoYXBcw5Aw15puNI5ymAhc+38rW7r0353v4DIDKKyr9AlboAAAAASUVORK5CYII=",blurWidth:6,blurHeight:8},b={src:"/_next/static/media/gcp-grant-access-3.eb34b299.png",height:530,width:608,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAIAAAC6O5sJAAAAfklEQVR42k2MywpCMQxE8///5co/EARxUyncPm36mKQa78rDWYTJMFRKeZ/UWkVEVffedpA9vPfOudcfVqKUUozxOEKIP0IIlgCgnFMp1mit8ZxzrSmArVHKtj96X2zyGlPMBaHHM12u/nbPqh/IBkwVUep9AAJAVU4tBTN/AXkfoEjphUmlAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:7},v={src:"/_next/static/media/gcs-rr-setup-1.96fbda5b.png",height:584,width:1391,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADBAMAAABc5lN7AAAAJFBMVEX+/v79/f79/f37+v35+fv5+fr5+Pv39/r29vn29vfw7/Pn5+iEUb0kAAAAF0lEQVR42mNYYcDAwFCSGcDAsFVIURAAGJgC//8xytMAAAAASUVORK5CYII=",blurWidth:8,blurHeight:3},f={src:"/_next/static/media/gcs-rr-setup-2.18ff63e0.png",height:750,width:1386,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAAM1BMVEX+/v/+/v79/f79/f38/f78/P77+v36+vv5+fr3+Pn39/r29vn19vf09Pf09PXx8PTm5ufj1N+nAAAAKElEQVR42mPg52ZjYGBkZGTg42Dn5WICMng4WVlYmJiYGAQ4mECAGQANMACplXhxCQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:4},m=t(57703),w=t(95956),R=t(42033),C=t(45192);function y(e){return[{value:"Overview",id:"overview",depth:2},{value:"Resource Setup",id:"resource-setup",depth:2},{value:"Service Account Creation",id:"service-account-creation",depth:3},{value:"Storage Bucket Creation",id:"storage-bucket-creation",depth:3},{value:"GCS Bucket Notification Creation",id:"gcs-bucket-notification-creation",depth:3},{value:"Pub/Sub Subscription Creation",id:"pubsub-subscription-creation",depth:3},{value:"Authentication Setup",id:"authentication-setup",depth:2},{value:"AWS Setup",id:"aws-setup",depth:3},{value:"Prepare GCP",id:"prepare-gcp",depth:3},{value:"Create a Pool",id:"create-a-pool",depth:3},{value:"Grant Service Account Access",id:"grant-service-account-access",depth:3},{value:"RunReveal Source Setup",id:"runreveal-source-setup",depth:2},{value:"Service Account Keys",id:"service-account-keys",depth:3},{value:"Workload Identity Federation",id:"workload-identity-federation",depth:3},{value:"Final Steps",id:"final-steps",depth:2}]}function k(e,i){throw Error("Expected "+(i?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}var E=(0,s.c)(function(e){let{toc:i=y(e)}=e,t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",...(0,a.a)(),...e.components};return m.m||k("Tabs",!1),m.m.Tab||k("Tabs.Tab",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{children:"Google Cloud Storage Ingestion"}),"\n",(0,n.jsx)(t.p,{children:"This guide explains how to set up log ingestion from Google Cloud Storage (GCS) using either service account keys or workload identity federation with AWS."}),"\n",(0,n.jsx)(t.h2,{id:i[0].id,children:i[0].value}),"\n",(0,n.jsx)(t.p,{children:"The process for ingesting logs from Google Cloud Storage (GCS) involves 3 steps:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Send your logs/events to a storage bucket."}),"\n",(0,n.jsxs)(t.li,{children:["An ",(0,n.jsx)(t.em,{children:"Object Created"})," event is triggered and adds a message to a pub/sub topic."]}),"\n",(0,n.jsx)(t.li,{children:"Every minute, RunReveal will poll a pub/sub subscription on the created topic, pull any new notifications, and process the objects that are returned."}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:i[1].id,children:i[1].value}),"\n",(0,n.jsx)(t.p,{children:"Setting up a GCS ingestion source requires the following steps:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Create a service account that will have access to the resources."}),"\n",(0,n.jsx)(t.li,{children:"Create a storage bucket giving read access to the created service account."}),"\n",(0,n.jsx)(t.li,{children:"Create a GCS bucket notification that writes to a new pub/sub topic."}),"\n",(0,n.jsx)(t.li,{children:"Create a pub/sub subscription that RunReveal can use to poll for new events giving subscribe access to the service account."}),"\n",(0,n.jsx)(t.li,{children:"Give RunReveal authentication access to your service account using either service account keys or workload identity federation."}),"\n",(0,n.jsx)(t.li,{children:"Create a RunReveal source and provide us with the details of your setup."}),"\n"]}),"\n",(0,n.jsxs)(w.U,{type:"info",children:[(0,n.jsx)(t.p,{children:"Service accounts require the following permissions for RunReveal to process logs:"}),(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Storage Object Viewer"})," on the storage bucket where logs are stored."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Pub/Sub Subscriber"})," on the pub/sub subscription where event notifications are sent."]}),"\n"]})]}),"\n",(0,n.jsxs)(R.R,{children:[(0,n.jsx)(t.h3,{id:i[2].id,children:i[2].value}),(0,n.jsxs)(t.p,{children:["Choose a project for the storage bucket, pub/sub topic, and service account. Create a new service account (or use an existing one) at ",(0,n.jsx)(t.a,{href:"https://console.cloud.google.com/iam-admin/serviceaccounts/create",children:"https://console.cloud.google.com/iam-admin/serviceaccounts/create"})]}),(0,n.jsxs)(t.p,{children:["Give the service account a name, id, and a description. ",(0,n.jsx)(t.strong,{children:"Copy the generated service email address for future steps"}),"."]}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"gcp service account creation",placeholder:"blur",src:c})}),(0,n.jsx)(t.h3,{id:i[3].id,children:i[3].value}),(0,n.jsxs)(t.p,{children:["Create a new bucket in the GCP ",(0,n.jsx)(t.a,{href:"https://console.cloud.google.com/storage/browser",children:"cloud storage"})," page."]}),(0,n.jsx)(w.U,{type:"info",children:(0,n.jsx)(t.p,{children:"If adding a retention policy to the bucket, make sure it’s no less than 4 hours to ensure RunReveal has sufficient time to import all logs before object deletion."})}),(0,n.jsxs)(t.p,{children:["Add the service account email to the bucket’s permissions with the ",(0,n.jsx)(t.code,{children:"Storage Object Viewer"})," role."]}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"bucket permissions",placeholder:"blur",src:o})}),(0,n.jsx)(t.h3,{id:i[4].id,children:i[4].value}),(0,n.jsx)(t.p,{children:"Create a pub/sub notification for new objects added to the bucket using the GCP cloud shell:"}),(0,n.jsx)(t.pre,{icon:C.Fx,tabIndex:"0","data-language":"bash","data-word-wrap":"",children:(0,n.jsx)(t.code,{children:(0,n.jsxs)(t.span,{children:[(0,n.jsx)(t.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"gcloud"}),(0,n.jsx)(t.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" storage"}),(0,n.jsx)(t.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" buckets"}),(0,n.jsx)(t.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" notifications"}),(0,n.jsx)(t.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" create"}),(0,n.jsx)(t.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" gs://BUCKET_NAME"}),(0,n.jsx)(t.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" --topic=TOPIC_NAME"}),(0,n.jsx)(t.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" -e"}),(0,n.jsx)(t.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" OBJECT_FINALIZE"})]})})}),(0,n.jsxs)(t.p,{children:["Replace ",(0,n.jsx)(t.code,{children:"BUCKET_NAME"})," with your bucket name and ",(0,n.jsx)(t.code,{children:"TOPIC_NAME"})," with your desired topic name."]}),(0,n.jsx)(t.h3,{id:i[5].id,children:i[5].value}),(0,n.jsxs)(t.p,{children:["Create a new ",(0,n.jsx)(t.code,{children:"pull"})," subscription for the topic:"]}),(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Give the subscription an ID and select the topic created in the previous step."}),"\n",(0,n.jsxs)(t.li,{children:["Choose ",(0,n.jsx)(t.code,{children:"Pull"})," as the delivery type."]}),"\n",(0,n.jsx)(t.li,{children:"Set other settings according to your preferences."}),"\n"]}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"topic creation",placeholder:"blur",src:l})}),(0,n.jsxs)(t.p,{children:["Grant the service account the ",(0,n.jsx)(t.code,{children:"Pub/Sub Subscriber"})," role on the subscription."]}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"topic creation",placeholder:"blur",src:d})}),(0,n.jsx)(w.U,{type:"info",children:(0,n.jsx)(t.p,{children:"Save the subscription name for setting up your RunReveal source."})})]}),"\n",(0,n.jsx)(t.h2,{id:i[6].id,children:i[6].value}),"\n",(0,n.jsx)(t.p,{children:"RunReveal offers two authentication methods for GCS access, service account keys where you will provide RunReveal with a JSON config file containing a private key,\nor using workload identity federation where you give an AWS IAM role access to authenticate as your chosen service account."}),"\n",(0,n.jsxs)(m.m,{items:["Service Account Keys","Workload Identity Federation"],children:[(0,n.jsxs)(m.m.Tab,{children:[(0,n.jsx)(t.h3,{children:"Service Account Keys"}),(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Open the service account and navigate to the keys menu."}),"\n",(0,n.jsx)(t.li,{children:"Create a new JSON private key."}),"\n",(0,n.jsx)(t.li,{children:"Download the new key to provide to RunReveal when setting up your source."}),"\n"]}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"gcp service account key",placeholder:"blur",src:h})})]}),(0,n.jsxs)(m.m.Tab,{children:[(0,n.jsx)(t.h3,{children:"Workload Identity Federation with AWS"}),(0,n.jsxs)(t.p,{children:["Follow the ",(0,n.jsx)(t.a,{href:"https://cloud.google.com/iam/docs/workload-identity-federation-with-other-clouds",children:"GCP documentation"})," for setting up a Workload Identity Pool.\nRunReveal allows you to bring your own AWS IAM Role or use the provided one to allow authentication."]}),(0,n.jsxs)(R.R,{children:[(0,n.jsx)(t.h3,{id:i[7].id,children:i[7].value}),(0,n.jsx)(t.p,{children:"If you plan to bring your own IAM Role you will need to add the RunReveal AWS account as a trusted entity. Use the following policy to add the account and provide an optional external ID."}),(0,n.jsx)(t.pre,{tabIndex:"0","data-language":"plaintext","data-word-wrap":"",children:(0,n.jsxs)(t.code,{children:[(0,n.jsx)(t.span,{children:(0,n.jsx)(t.span,{children:"{"})}),"\n",(0,n.jsx)(t.span,{children:(0,n.jsx)(t.span,{children:'    "Version": "2012-10-17",'})}),"\n",(0,n.jsx)(t.span,{children:(0,n.jsx)(t.span,{children:'    "Statement": ['})}),"\n",(0,n.jsx)(t.span,{children:(0,n.jsx)(t.span,{children:"        {"})}),"\n",(0,n.jsx)(t.span,{children:(0,n.jsx)(t.span,{children:'            "Effect": "Allow",'})}),"\n",(0,n.jsx)(t.span,{children:(0,n.jsx)(t.span,{children:'            "Principal": {'})}),"\n",(0,n.jsx)(t.span,{children:(0,n.jsx)(t.span,{children:'                "AWS": "arn:aws:iam::253602268883:root"'})}),"\n",(0,n.jsx)(t.span,{children:(0,n.jsx)(t.span,{children:"            },"})}),"\n",(0,n.jsx)(t.span,{children:(0,n.jsx)(t.span,{children:'            "Action": "sts:AssumeRole",'})}),"\n",(0,n.jsx)(t.span,{children:(0,n.jsx)(t.span,{children:'            "Condition": {'})}),"\n",(0,n.jsx)(t.span,{children:(0,n.jsx)(t.span,{children:'                "StringEquals": {'})}),"\n",(0,n.jsx)(t.span,{children:(0,n.jsx)(t.span,{children:'                    "sts:ExternalId": "<EXTERNAL_ID>"'})}),"\n",(0,n.jsx)(t.span,{children:(0,n.jsx)(t.span,{children:"                }"})}),"\n",(0,n.jsx)(t.span,{children:(0,n.jsx)(t.span,{children:"            }"})}),"\n",(0,n.jsx)(t.span,{children:(0,n.jsx)(t.span,{children:"        }"})}),"\n",(0,n.jsx)(t.span,{children:(0,n.jsx)(t.span,{children:"    ]"})}),"\n",(0,n.jsx)(t.span,{children:(0,n.jsx)(t.span,{children:"}"})})]})}),(0,n.jsx)(t.h3,{id:i[8].id,children:i[8].value}),(0,n.jsx)(t.p,{children:"Before beginning you will need to enable specific APIs to allow RunReveal the ability to authenticate."}),(0,n.jsx)(t.p,{children:"Enable the IAM, Resource Manager, Service Account Credentials, and Security Token Service APIs."}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://console.cloud.google.com/flows/enableapi?apiid=iam.googleapis.com,cloudresourcemanager.googleapis.com,iamcredentials.googleapis.com,sts.googleapis.com&redirect=https://console.cloud.google.com",children:"Enable the APIs"})}),(0,n.jsx)(t.h3,{id:i[9].id,children:i[9].value}),(0,n.jsxs)(t.p,{children:["Open the ",(0,n.jsx)(t.a,{href:"https://console.cloud.google.com/iam-admin/workload-identity-pools",children:"Workload Identity Federation"})," page in the IAM & Admin section and click on ",(0,n.jsx)(t.code,{children:"Create Pool"}),"."]}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"gcp-federated-1.png",placeholder:"blur",src:A})}),(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Give the pool a name and description and select continue."}),"\n"]}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"gcp-create-pool-1.png",placeholder:"blur",src:u})}),(0,n.jsxs)(t.ol,{start:"2",children:["\n",(0,n.jsx)(t.li,{children:"Create a new AWS provider giving it a name and your AWS account ID."}),"\n"]}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"gcp-create-pool-2.png",placeholder:"blur",src:p})}),(0,n.jsx)(w.U,{type:"info",children:(0,n.jsxs)(t.p,{children:["If you plan to use the RunReveal provided AWS role enter RunReveal’s account ID, ",(0,n.jsx)(t.code,{children:"253602268883"}),"."]})}),(0,n.jsxs)(t.ol,{start:"3",children:["\n",(0,n.jsx)(t.li,{children:"Unless you have specific needs, you can leave the mappings and conditions as the default values. And click save."}),"\n"]}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"gcp-create-pool-3.png",placeholder:"blur",src:g})}),(0,n.jsx)(t.h3,{id:i[10].id,children:i[10].value}),(0,n.jsx)(t.p,{children:"Now that your pool and provider are created you can grant access to the pool by clicking on the ‘Grant Access’ button."}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"gcp-grant-access-1.png",placeholder:"blur",src:x})}),(0,n.jsx)(t.p,{children:"Select the service account that you have setup previously that has the correct permissions to access the GCP resources (bucket and pub/sub)."}),(0,n.jsxs)(t.p,{children:["Select ",(0,n.jsx)(t.code,{children:"aws_role"})," as the attribute name that will be used for lookup. Enter the assumed role arn as the attribute value, ",(0,n.jsx)(t.code,{children:"arn:aws:sts::<account_id>:assumed-role/<role_name>"}),"."]}),(0,n.jsx)(w.U,{type:"info",children:(0,n.jsxs)(t.p,{children:["If you are using the RunReveal provided role, you will enter ",(0,n.jsx)(t.code,{children:"arn:aws:sts::253602268883:assumed-role/runreveal_identity_federation"})," into this field."]})}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"gcp-grant-access-2.png",placeholder:"blur",src:j})}),(0,n.jsx)(t.p,{children:"Select the provider from the dropdown and download the config. This config file contains the settings required for clients to authenticate. Keep this file as it will be supplied to RunReveal when creating your source."}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"gcp-grant-access-3.png",placeholder:"blur",src:b})})]})]})]}),"\n",(0,n.jsx)(t.h2,{id:i[11].id,children:i[11].value}),"\n",(0,n.jsxs)(t.p,{children:["Navigate to the ",(0,n.jsx)(t.a,{href:"https://app.runreveal.com/dash/sources/add",children:"Connect a source"})," page and find the source you are adding. Select the ",(0,n.jsx)(t.code,{children:"Google Cloud Storage Bucket"})," ingest method and fill in the fields.\nRegardless of the authentication method you will need to provide the subscription path created in the Pub/Sub Subscription Creation step."]}),"\n",(0,n.jsx)(t.h3,{id:i[12].id,children:i[12].value}),"\n",(0,n.jsxs)(t.p,{children:["If authenticating with service account keys select the ",(0,n.jsx)(t.code,{children:"Service account key"})," method and paste or select the private key file that was downloaded from GCP for the service account."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"gcs-setup",placeholder:"blur",src:v})}),"\n",(0,n.jsx)(t.h3,{id:i[13].id,children:i[13].value}),"\n",(0,n.jsx)(t.p,{children:"If authenticating with identity federation you will need to provide the AWS role arn that RunReveal will assume. Leave this field blank if you plan to use the RunReveal provided role."}),"\n",(0,n.jsx)(t.p,{children:"If your role uses an external ID for authentication make sure the same value is pasted in the External ID field."}),"\n",(0,n.jsx)(t.p,{children:"Copy or select the config file that was downloaded in the Grant Service Account Access steps."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"gcs-setup2",placeholder:"blur",src:f})}),"\n",(0,n.jsx)(t.h2,{id:i[14].id,children:i[14].value}),"\n",(0,n.jsx)(t.p,{children:"At this point, all pieces are in place for RunReveal to access logs stored in the bucket. Continue to the source docs for specific instructions on how to get your logs into the GCS bucket."})]})},"/sources/object-storage/gcs",{filePath:"pages/sources/object-storage/gcs.mdx",timestamp:1750451516e3,pageMap:r.v,frontMatter:{title:"GCS",description:"Configure Google Cloud Storage for log ingestion in RunReveal. Set up service accounts, pub/sub notifications, and authentication for automated log processing."},title:"GCS"},"undefined"==typeof RemoteContent?y:RemoteContent.useTOC)}},function(e){e.O(0,[7812,6295,4854,2888,9774,179],function(){return e(e.s=61186)}),_N_E=e.O()}]);