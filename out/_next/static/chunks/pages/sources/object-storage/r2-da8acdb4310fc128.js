(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9943],{81176:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sources/object-storage/r2",function(){return r(48581)}])},48581:function(e,n,r){"use strict";r.r(n),r.d(n,{useTOC:function(){return a}});var t=r(85893),i=r(37812),l=r(84854),o=r(79299),s=r(95956);function a(e){return[{value:"Prerequisites",id:"prerequisites",depth:2},{value:"1. Cloudflare Account ID",id:"1-cloudflare-account-id",depth:3},{value:"2. Queue Identifier",id:"2-queue-identifier",depth:3},{value:"Authentication Setup",id:"authentication-setup",depth:2},{value:"R2 Credentials",id:"r2-credentials",depth:3},{value:"Cloudflare API Token",id:"cloudflare-api-token",depth:3},{value:"Event Notification Configuration",id:"event-notification-configuration",depth:2},{value:"Creating Your Source",id:"creating-your-source",depth:2},{value:"Rate limits",id:"rate-limits",depth:2}]}n.default=(0,i.c)(function(e){let{toc:n=a(e)}=e,r={a:"a",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",ul:"ul",...(0,o.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.h1,{children:"Cloudflare R2 Bucket Configuration Guide"}),"\n",(0,t.jsx)(r.p,{children:"This guide explains how to set up a Cloudflare R2 bucket as a data source for RunReveal. The setup requires two components:"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:"An R2 storage bucket that RunReveal can read objects from"}),"\n",(0,t.jsx)(r.li,{children:"A Cloudflare Workers Queue for event notifications"}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"Note: You’ll need both R2 credentials and a Cloudflare API key for this setup."}),"\n",(0,t.jsx)(r.h2,{id:n[0].id,children:n[0].value}),"\n",(0,t.jsx)(r.h3,{id:n[1].id,children:n[1].value}),"\n",(0,t.jsx)(r.p,{children:"First, locate your Cloudflare Account ID from the R2 homepage:"}),"\n",(0,t.jsx)("img",{src:"/r2-1.png"}),"\n",(0,t.jsx)(r.h3,{id:n[2].id,children:n[2].value}),"\n",(0,t.jsx)(r.p,{children:"Create a queue in the Cloudflare Workers Queues dashboard that will handle R2 object notifications. Make note of the queue ID:"}),"\n",(0,t.jsx)("img",{src:"/r2-2.png"}),"\n",(0,t.jsx)(r.p,{children:"Additionally, enable HTTP Pull for your queue so that RunReveal is able to read from your queue over HTTP. This is under\nSettings > Add Consumer"}),"\n",(0,t.jsx)("img",{src:"/r2-6.png"}),"\n",(0,t.jsx)(r.h2,{id:n[3].id,children:n[3].value}),"\n",(0,t.jsx)(r.h3,{id:n[4].id,children:n[4].value}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:"Navigate to R2 > Manage R2 API Tokens"}),"\n",(0,t.jsx)(r.li,{children:"Create a new R2 token with “Object Read Only” permissions"}),"\n",(0,t.jsx)(r.li,{children:"Grant access to the bucket that RunReveal will read logs from"}),"\n"]}),"\n",(0,t.jsx)("img",{src:"/r2-3.png"}),"\n",(0,t.jsxs)(r.ol,{start:"4",children:["\n",(0,t.jsx)(r.li,{children:"Save the Access Key ID and Secret Access Key for use in the source setup later."}),"\n"]}),"\n",(0,t.jsx)(s.U,{type:"info",children:(0,t.jsxs)(r.p,{children:["You must create R2 Access Keys from the R2 dashboard.  Creating an API Token\nwith the “Workers R2 Storage” scoped permissions will not give you the\ncorrect ",(0,t.jsx)(r.em,{children:"Access Key ID"})," and ",(0,t.jsx)(r.em,{children:"Secret Access Key"})," needed for compatability\nwith S3 that RunReveal requires to ingest logs."]})}),"\n",(0,t.jsx)(r.h3,{id:n[5].id,children:n[5].value}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:"Go to “Account API Tokens”"}),"\n",(0,t.jsx)(r.li,{children:"Create a new token with Account > Queues > Edit permissions"}),"\n"]}),"\n",(0,t.jsx)("img",{src:"/r2-4.png"}),"\n",(0,t.jsx)(r.h2,{id:n[6].id,children:n[6].value}),"\n",(0,t.jsx)(r.p,{children:"To notify RunReveal when new data is available:"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:"Navigate to your R2 bucket > Settings > Event notifications"}),"\n",(0,t.jsx)(r.li,{children:"Click “Add Notification”"}),"\n",(0,t.jsx)(r.li,{children:"Select your Workers Queue"}),"\n",(0,t.jsx)(r.li,{children:"Enable “Creation of a new object”"}),"\n"]}),"\n",(0,t.jsx)("img",{src:"/r2-5.png"}),"\n",(0,t.jsx)(r.h2,{id:n[7].id,children:n[7].value}),"\n",(0,t.jsx)(r.p,{children:"Provide RunReveal with the following information to begin reading data:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Queue ID"}),"\n",(0,t.jsx)(r.li,{children:"Cloudflare API Token"}),"\n",(0,t.jsx)(r.li,{children:"R2 Credentials (Access Key ID and Secret Access Key)"}),"\n",(0,t.jsx)(r.li,{children:"Cloudflare Account ID"}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"RunReveal will automatically begin processing new data as it becomes available in R2."}),"\n",(0,t.jsx)(r.h2,{id:n[8].id,children:n[8].value}),"\n",(0,t.jsxs)(r.p,{children:["Keep in mind that Cloudflare Workers Queues have ratelimits. These ratelimits are defined in ",(0,t.jsx)(r.a,{href:"https://developers.cloudflare.com/queues/platform/limits/",children:"Cloudflare’s docs"}),"."]}),"\n",(0,t.jsx)(r.p,{children:"For most use cases this shouldn’t be an issue. However, sharing Workers API keys between sources, or writing lots of small objects can cause these limits to be reached."})]})},"/sources/object-storage/r2",{filePath:"pages/sources/object-storage/r2.mdx",timestamp:1731985702e3,pageMap:l.v,frontMatter:{title:"R2",description:"Configure Cloudflare R2 bucket for log ingestion in RunReveal. Set up R2 credentials, Workers Queues, and event notifications for automated log processing."},title:"R2"},"undefined"==typeof RemoteContent?a:RemoteContent.useTOC)},95956:function(e,n,r){"use strict";r.d(n,{U:function(){return a}});var t=r(85893),i=r(90512),l=r(45192);let o={default:"\uD83D\uDCA1",error:"\uD83D\uDEAB",info:(0,t.jsx)(l.AV,{className:"_mt-1"}),warning:"⚠️"},s={default:(0,i.Z)("_border-orange-100 _bg-orange-50 _text-orange-800 dark:_border-orange-400/30 dark:_bg-orange-400/20 dark:_text-orange-300"),error:(0,i.Z)("_border-red-200 _bg-red-100 _text-red-900 dark:_border-red-200/30 dark:_bg-red-900/30 dark:_text-red-200"),info:(0,i.Z)("_border-blue-200 _bg-blue-100 _text-blue-900 dark:_border-blue-200/30 dark:_bg-blue-900/30 dark:_text-blue-200"),warning:(0,i.Z)("_border-yellow-100 _bg-yellow-50 _text-yellow-900 dark:_border-yellow-200/30 dark:_bg-yellow-700/30 dark:_text-yellow-200")};function a({children:e,type:n="default",emoji:r=o[n]}){return(0,t.jsxs)("div",{className:(0,i.Z)("nextra-callout _overflow-x-auto _mt-6 _flex _rounded-lg _border _py-2 ltr:_pr-4 rtl:_pl-4","contrast-more:_border-current contrast-more:dark:_border-current",s[n]),children:[(0,t.jsx)("div",{className:"_select-none _text-xl ltr:_pl-3 ltr:_pr-2 rtl:_pr-3 rtl:_pl-2",style:{fontFamily:'"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"'},children:r}),(0,t.jsx)("div",{className:"_w-full _min-w-0 _leading-7",children:e})]})}}},function(e){e.O(0,[7812,4854,2888,9774,179],function(){return e(e.s=81176)}),_N_E=e.O()}]);