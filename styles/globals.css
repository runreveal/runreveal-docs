@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================================================
   CSS CUSTOM PROPERTIES
   ============================================================================ */
:root {
  --nextra-primary-hue: 270;
  --nextra-primary-saturation: 100%;
  --nextra-primary-lightness: 60%;
  --runreveal-600: #9333ea;
  --runreveal-700: #7c3aed;
  --violet-600: #7c3aed;
  --violet-600-80: rgba(124, 58, 237, 0.9);
  --font-ibm-plex-stack: var(--font-ibm-plex), "IBM Plex Sans", "IBM Plex Sans Fallback", -apple-system, system-ui, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
  
  /* Heading border colors - Brand purple (#7c3aed = rgb(124, 58, 237)) */
  --heading-h1-color: rgb(124, 58, 237); /* Brand purple - full opacity for H1 */
  --heading-h2-color: rgba(124, 58, 237, 0.75); /* Brand purple - 75% opacity for H2 */
  
  /* Heading border widths - Only H1 and H2 have borders */
  --heading-h1-width: 4px; /* 3-4px range: using 4px for clear hierarchy */
  --heading-h2-width: 3.5px; /* 2-3px range: increased to 3.5px for better visibility */
}

.dark {
  /* Heading border colors - Dark mode (slightly lighter purple, reduced opacity to avoid pure white appearance) */
  --heading-h1-color: rgba(147, 51, 234, 0.9); /* runreveal-600 - 90% opacity for dark mode */
  --heading-h2-color: rgba(147, 51, 234, 0.7); /* runreveal-600 - 70% opacity for dark mode (within 70-80% range) */
}

/* ============================================================================
   UTILITY CLASSES & GLOBAL STYLES
   ============================================================================ */

/* Highlight heading styling */
.bg-highlight-best h3,
.bg-highlight-affordable h3,
.bg-highlight-simple h3,
.bg-highlight-modern h3 {
  color: white !important;
  margin-top: 0 !important;
}

/* Global image styling */
img {
  border-radius: 5px;
}

/* Red icon styling */
.icon-red {
  filter: hue-rotate(0deg) saturate(2) brightness(0.8) sepia(1) hue-rotate(0deg);
}

/* Hide footer */
footer {
  display: none !important;
}

/* Hide breadcrumbs */
nav[aria-label="breadcrumb"],
.nextra-breadcrumb,
[class*="breadcrumb"] {
  display: none !important;
}

/* Global dark mode text color */
.dark :is(.text-gray-400, .text-gray-300) {
  color: white !important;
}

/* Mermaid diagram text color in dark mode */
.dark :is(.mermaid, svg.mermaid, [class*="mermaid"], pre.mermaid, pre code.language-mermaid + svg, .mermaid svg, svg[data-mermaid]) text,
.dark :is(.mermaid, svg.mermaid) :is(.nodeLabel, .edgeLabel, .cluster-label) {
  fill: white !important;
  color: white !important;
}

/* ============================================================================
   HEADING STYLES - Typographic Hierarchy
   ============================================================================
   Brand purple borders for H1-H2 only. H3-H6 use spacing and typography only.
   Scoped to documentation content areas only (excludes nav/sidebar/tables/callouts/code).
   
   To adjust: Modify --heading-h1-color, --heading-h2-color, --heading-h1-width, 
   or --heading-h2-width CSS variables above.
   ============================================================================ */

/* Content container selector - Scoped to main documentation content */
:is(main article, main .nextra-content, article, .nextra-content) {
  /* H1 – Page Title: 3-4px border, brand purple, 24-32px margin bottom */
  body[data-pathname="/"] & h1:first-of-type {
    @apply pb-3 mb-8;
    border-bottom: none !important;
  }

  /* H1 – Page Title (all other pages) */
  body:not([data-pathname="/"]) & h1:first-of-type {
    @apply pt-4 pb-3 mb-8;
    border-bottom: var(--heading-h1-width) solid var(--heading-h1-color) !important;
  }

  /* H2 – Major Sections: 2-3px border, brand purple 70-80% opacity */
  & h2 {
    @apply pb-2 mb-6 font-semibold;
    border-bottom: var(--heading-h2-width) solid var(--heading-h2-color) !important;
  }

  /* H3 – Subsections: NO border, spacing + font weight only */
  & h3 {
    @apply pb-2 mb-4 mt-6 font-semibold;
    border-bottom: none !important;
  }

  /* H4 – Detail Headings: NO border, typography and spacing only */
  & h4 {
    @apply pb-1.5 mb-3 mt-5 font-medium;
    border-bottom: none !important;
  }

  /* H5 – Detail Headings: NO border, typography and spacing only */
  & h5 {
    @apply pb-1 mb-2 mt-4 font-medium;
    border-bottom: none !important;
  }

  /* H6 – Detail Headings: NO border, typography and spacing only */
  & h6 {
    @apply pb-1 mb-2 mt-4 font-medium;
    border-bottom: none !important;
  }
}

/* Exclude headings in tables, callouts, code blocks, and custom components */
:is(main article, main .nextra-content, article, .nextra-content) 
  :is(table, thead, tbody, tr, td, th) :is(h1, h2, h3, h4, h5, h6),
:is(main article, main .nextra-content, article, .nextra-content) 
  :is([class*="callout"], [class*="nx-callout"], [data-callout]) :is(h1, h2, h3, h4, h5, h6),
:is(main article, main .nextra-content, article, .nextra-content) 
  :is(pre, code, [class*="code"], [class*="pre"]) :is(h1, h2, h3, h4, h5, h6),
:is(main article, main .nextra-content, article, .nextra-content) 
  :is([class*="rounded-xl"][class*="bg-"], [class*="rounded-lg"][class*="bg-"], [class*="rounded-2xl"][class*="bg-"], [class*="gradient"], [class*="card"]) :is(h1, h2, h3, h4, h5, h6),
:is(main article, main .nextra-content, article, .nextra-content) 
  :is(h1, h2, h3, h4, h5, h6) a[href^="http://"],
:is(main article, main .nextra-content, article, .nextra-content) 
  :is(h1, h2, h3, h4, h5, h6) a[href^="https://"] {
  border-bottom: none !important;
}

/* Limit first h1 width on desktop */
@media (min-width: 768px) {
  :is(main article, main .nextra-content, article, .nextra-content) h1:first-of-type {
    max-width: 90%;
  }
}

/* ============================================================================
   FULL WIDTH LAYOUT
   ============================================================================ */

/* Target the main content wrapper for full width */
.nextra-content,
article.nextra-content,
main article {
  max-width: 100% !important;
  width: 100% !important;
}

/* Remove max-width constraints from the content wrapper */
.nextra-content-container {
  max-width: 100% !important;
  width: 100% !important;
}

/* Reduce padding on main content area */
main > div:first-child {
  padding-left: 1rem !important;
  padding-right: 1rem !important;
}

/* Remove extra padding from nextra's prose container */
.prose,
.nextra-prose {
  max-width: 100% !important;
  width: 100% !important;
}

/* Target Nextra's specific width classes - be more specific */
article .nx-max-w-screen-xl,
main .nx-max-w-screen-xl {
  max-width: 100% !important;
}

/* ============================================================================
   NEXTRa COMPONENT STYLING
   ============================================================================ */
@layer components {
  /* Navbar styling */
  .nextra-nav-container,
  .nextra-nav-container-blur,
  header {
    font-weight: 600;
    border-bottom: 2px solid hsl(var(--nextra-primary-hue) var(--nextra-primary-saturation) var(--nextra-primary-lightness));
  }

  /* Navbar text styling */
  :is(header, .nextra-nav-container, .nextra-nav-container-blur) :is(a, button, span) {
    @apply font-semibold tracking-tight;
  }

  /* Sidebar styling */
  .nextra-sidebar :is(a, button, .nextra-focus) {
    @apply font-semibold tracking-tight;
  }
  
  /* Sidebar text color - force dark text in light mode */
  .nextra-sidebar,
  .nextra-sidebar-container,
  .nextra-sidebar a,
  .nextra-sidebar button,
  .nextra-sidebar span,
  .nextra-sidebar li,
  .nextra-sidebar svg,
  aside a,
  aside button,
  aside span,
  aside li,
  nav[class*="sidebar"] a,
  nav[class*="sidebar"] span,
  [class*="sidebar"] a,
  [class*="sidebar"] span,
  [class*="sidebar"] button {
    color: rgb(17, 24, 39) !important;
  }
  
  /* Target the sidebar icons too */
  .nextra-sidebar svg,
  aside svg,
  [class*="sidebar"] svg {
    color: rgb(17, 24, 39) !important;
    stroke: rgb(17, 24, 39) !important;
  }
  
  /* Dark mode sidebar text - keep light text */
  .dark .nextra-sidebar,
  .dark .nextra-sidebar-container,
  .dark .nextra-sidebar a,
  .dark .nextra-sidebar button,
  .dark .nextra-sidebar span,
  .dark .nextra-sidebar li,
  .dark aside a,
  .dark aside button,
  .dark aside span,
  .dark aside li,
  .dark nav[class*="sidebar"] a,
  .dark nav[class*="sidebar"] span,
  .dark [class*="sidebar"] a,
  .dark [class*="sidebar"] span,
  .dark [class*="sidebar"] button {
    color: rgb(229, 231, 235) !important;
  }
  
  .dark .nextra-sidebar svg,
  .dark aside svg,
  .dark [class*="sidebar"] svg {
    color: rgb(229, 231, 235) !important;
    stroke: rgb(229, 231, 235) !important;
  }

  .nextra-sidebar :is(.nextra-focus, a, button):hover {
    background-color: hsl(var(--nextra-primary-hue) var(--nextra-primary-saturation) var(--nextra-primary-lightness));
    color: white;
  }

  .nextra-sidebar-container :is(.nextra-focus, a, button)[aria-current="page"],
  .nextra-sidebar :is(.nextra-focus, a, button)[aria-current="page"],
  .nextra-sidebar-container :is(.nextra-focus, a, button)._bg-primary-100,
  .nextra-sidebar :is(.nextra-focus, a, button)._bg-primary-100 {
    background-color: hsl(273.33deg 90% 96.08%);
    color: hsl(var(--nextra-primary-hue) var(--nextra-primary-saturation) calc(var(--nextra-primary-lightness) - 40%));
  }

  .nextra-sidebar li[open] > :is(a, button, .nextra-focus) {
    background-color: hsl(var(--nextra-primary-hue) var(--nextra-primary-saturation) var(--nextra-primary-lightness));
    color: white;
  }

  /* Search and font styling */
  :is(
    .nextra-search,
    .nextra-search-input,
    .nextra-search-dropdown,
    .nextra-search-results,
    .nextra-search-result,
    .nextra-search-modal,
    .nextra-search-overlay,
    .nextra-modal-content,
    [data-nextra-search],
    [data-nextra-search] :is(input, .nextra-scrollbar, ul, li, a, p, span),
    [data-reach-combobox-input],
    [data-reach-combobox-list],
    [data-reach-combobox-option],
    .nextra-search-container,
    .nextra-search-container :is(input, button, div, span, p, a, li, ul),
    #__next ~ div,
    [data-radix-portal],
    [data-reach-portal]
  ) {
    @apply font-sans;
    font-family: var(--font-ibm-plex-stack) !important;
  }

  /* Tab styling - Consolidated selectors */
  :is(button[role="tab"], [role="tab"] button, [data-state] button, button[data-state], [role="tablist"] button, [role="tabpanel"] ~ [role="tablist"] button) {
    border-top-left-radius: 0.375rem !important;
    border-top-right-radius: 0.375rem !important;
  }

  /* Active/selected tab */
  :is(button[role="tab"][data-state="active"], button[role="tab"][aria-selected="true"], [role="tab"][data-state="active"], [role="tab"][aria-selected="true"], button[data-state="active"], [data-state="active"] button) {
    @apply bg-runreveal-600 text-white border-gray-300;
    border-top-left-radius: 0.375rem !important;
    border-top-right-radius: 0.375rem !important;
    border-bottom-width: 1px !important;
  }

  /* Inactive tabs */
  :is(button[role="tab"]:not([data-state="active"]):not([aria-selected="true"]), [role="tab"]:not([data-state="active"]):not([aria-selected="true"]), button[data-state]:not([data-state="active"])) {
    background-color: transparent !important;
  }

  /* Tab hover states */
  :is(button[role="tab"]:not([data-state="active"]):not([aria-selected="true"]):hover, [role="tab"]:not([data-state="active"]):not([aria-selected="true"]):hover, button[data-state]:not([data-state="active"]):hover) {
    @apply bg-runreveal-600;
    border-top-left-radius: 0.375rem !important;
    border-top-right-radius: 0.375rem !important;
  }

  :is(button[role="tab"][data-state="active"]:hover, button[role="tab"][aria-selected="true"]:hover, [role="tab"][data-state="active"]:hover, button[data-state="active"]:hover) {
    @apply bg-runreveal-600;
  }
}
