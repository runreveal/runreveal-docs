---
title: 'CircleCI Integration Setup Guide'
description: 'Complete guide for setting up CircleCI audit logs integration with RunReveal'
---

# CircleCI Integration Setup Guide

This guide will walk you through setting up CircleCI audit logs integration with RunReveal. The CircleCI source collects audit logs from your CircleCI organization, including build events, user activities, project changes, and security events.

## Overview

- **Source Type**: `circle-ci`
- **Ingest Method**: API Polling (every 60 seconds)
- **Data Collected**: CircleCI audit logs and build events
- **API Version**: CircleCI API v2.0
- **Plan**: Pro

## Prerequisites

- CircleCI organization with admin access
- CircleCI Personal API Token
- RunReveal Pro plan or higher

## Step 1: Create a CircleCI Personal API Token

### 1.1 Access CircleCI Settings

1. Go to [CircleCI Dashboard](https://app.circleci.com/)
2. Sign in with your CircleCI account
3. Click on your **User Settings** (profile icon in top right)
4. Navigate to **Personal API Tokens**

### 1.2 Generate API Token

1. Click **"Create New Token"**
2. **Token Name**: Enter a descriptive name (e.g., "RunReveal Audit Logs")
3. **Scopes**: Select the following scopes:
   - `audit` - Read audit logs
   - `read` - Read organization data
   - `insights` - Read insights data (if needed)

4. Click **"Add API Token"**
5. **Important**: Copy the token immediately (you won't be able to see it again)

## Step 2: Configure Organization Settings

### 2.1 Enable Audit Logs

1. In CircleCI, go to **Organization Settings**
2. Navigate to **Security** → **Audit Logs**
3. Ensure **"Audit Logs"** are enabled for your organization
4. If not enabled, contact your CircleCI administrator to enable them

### 2.2 Configure Log Retention

1. In the **Audit Logs** section, set the appropriate retention period
2. Ensure logs are being generated (you should see recent activity)
3. Note the available log types:
   - User authentication events
   - Project and workflow changes
   - Build and deployment events
   - Security-related activities

## Step 3: Configure RunReveal

### 3.1 Create CircleCI Source in RunReveal

1. Log into your RunReveal dashboard
2. Navigate to **Sources** → **Add Source**
3. Select **"CircleCI"** from the source list
4. Choose **"Polling"** as the ingest type

### 3.2 Configure Source Settings

Fill in the following fields:

**Settings:**
- **Unique ID**: Enter a unique identifier for this source (e.g., `circleci-org-001`)
- **Organization Slug**: Enter your CircleCI organization slug (found in your organization URL)

**Secrets:**
- **API Token**: Enter the Personal API Token from CircleCI

### 3.3 Test the Configuration

1. Click **"Verify Settings"** to test the connection
2. If successful, you should see a green checkmark
3. If there are errors, check:
   - API Token is correct and has proper scopes
   - Organization slug is accurate
   - Your CircleCI account has admin access
   - Audit logs are enabled in your CircleCI organization

## Step 4: Monitor and Verify

### 4.1 Check Data Ingestion

1. After saving your CircleCI source, wait 5-10 minutes
2. Go to **Logs** in your RunReveal dashboard
3. Filter by **Source Type**: `circle-ci`
4. You should see CircleCI audit events appearing

### 4.2 Verify Event Types

The CircleCI integration collects the following types of events:
- User login/logout events
- Project creation and modification events
- Build and workflow execution events
- Security-related activities
- Organization settings changes
- Team membership changes

### 4.3 Check for Errors

1. Go to **Sources** → **Errors** in RunReveal
2. Look for any CircleCI-related errors
3. Common issues:
   - Invalid API token
   - Insufficient permissions
   - Incorrect organization slug
   - Rate limiting

## Troubleshooting

### Common Issues

#### 1. "Invalid API Token"
- Verify the API token is correct and hasn't expired
- Ensure the token has the required scopes (`audit`, `read`)
- Check that the token was copied completely without extra spaces

#### 2. "Invalid Organization Slug"
- The organization slug is found in your CircleCI organization URL
- Format: `https://app.circleci.com/pipelines/github/[ORGANIZATION-SLUG]`
- Ensure there are no extra characters or spaces

#### 3. "Insufficient Permissions"
- Ensure your CircleCI account has admin access to the organization
- Verify the API token has the `audit` scope
- Check that audit logs are enabled in your CircleCI organization

#### 4. "No Events Found"
- Verify audit logs are enabled in CircleCI
- Check that there's recent activity in your CircleCI organization
- Ensure the source has been running for at least 10-15 minutes
- Some events may take time to appear in the audit logs

#### 5. Rate Limiting
- CircleCI API has rate limits (typically 100 requests per minute)
- RunReveal polls every 60 seconds, which should be within limits
- If you hit rate limits, contact CircleCI support to increase your limits

### Debug Steps

1. **Check CircleCI API Status**: Visit [CircleCI Status](https://status.circleci.com/) to ensure the API is operational

2. **Verify Token Permissions**: In CircleCI, go to Personal API Tokens and verify your token has the correct scopes

3. **Test API Access**: Use a tool like curl to test the CircleCI API directly:
   ```bash
   curl -H "Circle-Token: YOUR_API_TOKEN" \
        "https://circleci.com/api/v2/audit-log"
   ```

4. **Check Organization Settings**: Ensure audit logs are enabled in your CircleCI organization settings

5. **Check RunReveal Logs**: Look at RunReveal's internal logs for more detailed error messages

## Security Considerations

### 1. Token Management
- Store API tokens securely
- Rotate tokens regularly (recommended every 90 days)
- Use environment variables or secure credential storage
- Never commit tokens to version control

### 2. Access Control
- Limit API token access to necessary scopes only
- Regularly review and audit token permissions
- Monitor for unusual activity in CircleCI audit logs
- Use least privilege principle

### 3. Data Privacy
- Ensure compliance with your organization's data privacy policies
- Review what data is being collected and stored
- Implement appropriate data retention policies
- Consider data residency requirements

## API Reference

### CircleCI Audit Logs API
- **Endpoint**: `https://circleci.com/api/v2/audit-log`
- **Method**: GET
- **Authentication**: Personal API Token
- **Rate Limit**: 100 requests per minute
- **Documentation**: [CircleCI API v2](https://circleci.com/docs/api/v2/)

### Required Headers
```
Circle-Token: {personal_api_token}
Accept: application/json
```

### Query Parameters
- `limit`: Maximum number of events to return (default: 100, max: 1000)
- `offset`: Number of events to skip (for pagination)
- `start_date`: ISO 8601 timestamp for filtering events (optional)
- `end_date`: ISO 8601 timestamp for filtering events (optional)

### Example API Call
```bash
curl -H "Circle-Token: YOUR_API_TOKEN" \
     -H "Accept: application/json" \
     "https://circleci.com/api/v2/audit-log?limit=100"
```

## Support and Resources

### CircleCI Documentation
- [CircleCI API v2 Documentation](https://circleci.com/docs/api/v2/)
- [CircleCI Personal API Tokens](https://circleci.com/docs/2.0/managing-api-tokens/)
- [CircleCI Audit Logs](https://circleci.com/docs/audit-logs/)
- [CircleCI Organization Settings](https://circleci.com/docs/2.0/org-settings/)

### RunReveal Support
- [RunReveal Documentation](https://docs.runreveal.com/)
- [RunReveal Support](https://support.runreveal.com/)
- [RunReveal Community](https://community.runreveal.com/)

### CircleCI Support
- [CircleCI Support](https://support.circleci.com/)
- [CircleCI Community](https://discuss.circleci.com/)

## Configuration Summary

| Field | Value | Description |
|-------|-------|-------------|
| Source Type | `circle-ci` | CircleCI audit logs source |
| Ingest Type | `polling` | API polling method |
| Polling Frequency | 60 seconds | How often to check for new events |
| API Version | v2.0 | CircleCI API version |
| Required Scopes | `audit`, `read` | CircleCI API permissions |
| Plan | Pro | RunReveal plan requirement |

## Event Types Collected

The CircleCI integration collects various types of audit events:

### User Events
- User login/logout
- User profile changes
- Team membership changes
- Permission modifications

### Project Events
- Project creation/deletion
- Project settings changes
- Repository connections
- Environment variable changes

### Build Events
- Build start/completion
- Build failures
- Deployment events
- Workflow executions

### Security Events
- API token creation/deletion
- Organization settings changes
- Security policy updates
- Access control modifications

## Next Steps

After successfully setting up the CircleCI integration:

1. **Create Detection Rules**: Set up Sigma rules to detect suspicious CircleCI activity
2. **Configure Alerts**: Set up notifications for important security events
3. **Review Logs**: Regularly review CircleCI audit logs for security insights
4. **Monitor Performance**: Keep an eye on the integration's performance and error rates
5. **Update Tokens**: Plan for regular token rotation and updates

## Best Practices

### 1. Token Security
- Use dedicated tokens for RunReveal integration
- Implement token rotation schedule
- Monitor token usage and access patterns
- Use least privilege scopes

### 2. Monitoring
- Set up alerts for failed authentication attempts
- Monitor for unusual build patterns
- Track project access and modifications
- Review security-related events regularly

### 3. Compliance
- Ensure audit log retention meets compliance requirements
- Implement data classification for sensitive information
- Regular security reviews of CircleCI access
- Document integration for audit purposes

---

*This guide covers the complete setup process for CircleCI integration with RunReveal. For additional support or questions, please contact RunReveal support or refer to the official documentation.*
