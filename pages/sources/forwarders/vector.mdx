---
title: 'Vector Log Forwarder'
description: 'Configure Vector to forward logs to RunReveal using webhooks'
---

import { Callout, Tabs, Steps } from 'nextra/components'

# Vector Log Forwarder

[Vector](https://vector.dev/docs/) is a high-performance observability data pipeline that can collect, transform, and route logs to RunReveal.

## Quick Start

This setup demonstrates reading logs from a local file and forwarding them to your RunReveal webhook. The example creates test JSON logs, configures Vector to monitor the log file, and sends events to RunReveal in real-time.

<Steps>

### Step 1: Create a Webhook Source in RunReveal

This step creates a webhook source in RunReveal and generates the webhook URL you'll need for Vector configuration.

1. **Navigate to RunReveal**: Go to your RunReveal dashboard
2. **Create Source**: Click on "Sources" in the left sidebar
3. **Add Webhook**: Create a source for "[Structured Webhook or Generic Webhook](/sources/forwarders#choose-your-webhook-type)" based on your data format.
4. **Configure**: Give your webhook a name and description
5. **Copy URL**: Copy the generated webhook URL to use in your configuration. (It's always available after you save the source)

### Step 2: Install Vector

This step installs Vector on your system using your preferred method. Vector will be used to collect, process, and forward logs to RunReveal.

<Tabs items={['macOS', 'Ubuntu/Debian', 'CentOS/RHEL', 'Docker', 'Binary']}>
  <Tabs.Tab>

```bash copy
# Install via Homebrew
brew install vector

# Verify installation
vector --version
```

  </Tabs.Tab>
  <Tabs.Tab>

```bash copy
# Add Vector repository
curl -1sLf 'https://repositories.timber.io/public/vector/cfg/setup/bash.deb.sh' | sudo -E bash

# Install Vector
sudo apt-get update
sudo apt-get install vector

# Enable service
sudo systemctl enable vector

# Verify installation
vector --version
```

  </Tabs.Tab>
  <Tabs.Tab>

```bash copy
# Add Vector repository
curl -1sLf 'https://repositories.timber.io/public/vector/cfg/setup/bash.rpm.sh' | sudo -E bash

# Install Vector
sudo yum install vector

# Enable service
sudo systemctl enable vector

# Verify installation
vector --version
```

  </Tabs.Tab>
  <Tabs.Tab>

```bash copy
# Pull Vector image
docker pull timberio/vector:latest-alpine

# Create config directory
mkdir -p $(pwd)/vector-config

# Run Vector container
docker run -d \
  --name vector \
  -v $(pwd)/vector-config:/etc/vector \
  -v /var/log:/var/log:ro \
  timberio/vector:latest-alpine

# Verify container is running
docker ps | grep vector
```

  </Tabs.Tab>
  <Tabs.Tab>

```bash copy
# Linux x86_64
curl -L https://github.com/vectordotdev/vector/releases/latest/download/vector-x86_64-unknown-linux-gnu.tar.gz | tar -xz
sudo mv vector-*/bin/vector /usr/local/bin/

# macOS (Intel)
curl -L https://github.com/vectordotdev/vector/releases/latest/download/vector-x86_64-apple-darwin.tar.gz | tar -xz
sudo mv vector-*/bin/vector /usr/local/bin/

# macOS (Apple Silicon)
curl -L https://github.com/vectordotdev/vector/releases/latest/download/vector-aarch64-apple-darwin.tar.gz | tar -xz
sudo mv vector-*/bin/vector /usr/local/bin/

# Verify installation
vector --version
```

  </Tabs.Tab>
</Tabs>

### Step 3: Create Test Logs

This step creates sample log files with security events that Vector will monitor and forward to RunReveal. These logs simulate real application events for testing purposes.

<Tabs items={['macOS/Linux', 'Windows']}>
  <Tabs.Tab>

```bash copy
# Create vector directory for testing
mkdir -p vector
cd vector

# Create sample application logs
cat > application.log << EOF
{"eventName":"UserLogin","eventTime":"2024-01-15T10:30:00Z","readOnly":false,"actor":{"email":"mfa@company.com","id":"MFA777777","username":"mfa_user"},"src":{"ip":"192.168.1.114","port":443},"service":{"name":"vector-application"},"tags":{"environment":"production","source":"vector"}}
{"eventName":"FileAccess","eventTime":"2024-01-15T10:31:00Z","readOnly":true,"actor":{"email":"db@company.com","id":"DB888888","username":"database_service"},"src":{"ip":"192.168.1.115","port":443},"service":{"name":"vector-application"},"tags":{"environment":"production","source":"vector"}}
{"eventName":"DataExport","eventTime":"2024-01-15T10:32:00Z","readOnly":false,"actor":{"email":"metrics@company.com","id":"MET999999","username":"metrics_exporter"},"src":{"ip":"192.168.1.116","port":443},"service":{"name":"vector-application"},"tags":{"environment":"production","source":"vector"}}
EOF

# Verify logs were created
ls -la application.log
cat application.log
```

  </Tabs.Tab>
  <Tabs.Tab>

```powershell
# Create vector directory for testing
New-Item -ItemType Directory -Path "vector" -Force
Set-Location vector

# Create sample application logs
@"
{"eventName":"UserLogin","eventTime":"2024-01-15T10:30:00Z","readOnly":false,"actor":{"email":"mfa@company.com","id":"MFA777777","username":"mfa_user"},"src":{"ip":"192.168.1.114","port":443},"service":{"name":"vector-application"},"tags":{"environment":"production","source":"vector"}}
{"eventName":"FileAccess","eventTime":"2024-01-15T10:31:00Z","readOnly":true,"actor":{"email":"db@company.com","id":"DB888888","username":"database_service"},"src":{"ip":"192.168.1.115","port":443},"service":{"name":"vector-application"},"tags":{"environment":"production","source":"vector"}}
{"eventName":"DataExport","eventTime":"2024-01-15T10:32:00Z","readOnly":false,"actor":{"email":"metrics@company.com","id":"MET999999","username":"metrics_exporter"},"src":{"ip":"192.168.1.116","port":443},"service":{"name":"vector-application"},"tags":{"environment":"production","source":"vector"}}
"@ | Out-File -FilePath "application.log" -Encoding UTF8

# Verify logs were created
Get-ChildItem application.log
Get-Content application.log
```

  </Tabs.Tab>
</Tabs>

### Step 4: Configure Vector

This step creates the Vector configuration file that defines how to collect logs and send them to RunReveal.

<Tabs items={['Basic (No Auth)', 'Bearer Token Auth']}>
  <Tabs.Tab>

**Basic Configuration - No Authentication Required**

Use this configuration when your RunReveal webhook doesn't require a bearer token for authentication.

```toml copy
# vector.toml
data_dir = "./vector-data"

# Source: Read log files
[sources.my_logs]
type = "file"
include = ["application.log"]
read_from = "beginning"

# Sink: Send to RunReveal
[sinks.runreveal]
type = "http"
inputs = ["my_logs"]
uri = "YOUR_WEBHOOK_URL"
method = "post"

[sinks.runreveal.encoding]
codec = "json"

[sinks.runreveal.request]
timeout_secs = 30
```

Replace `YOUR_WEBHOOK_URL` with your actual webhook URL from Step 1.

  </Tabs.Tab>
  <Tabs.Tab>

**Configuration with Bearer Token Authentication**

Use this configuration when your RunReveal webhook requires bearer token authentication.

```toml copy
# vector.toml
data_dir = "./vector-data"

# Source: Read log files
[sources.my_logs]
type = "file"
include = ["application.log"]
read_from = "beginning"

# Sink: Send to RunReveal with authentication
[sinks.runreveal]
type = "http"
inputs = ["my_logs"]
uri = "${YOUR_WEBHOOK_URL}" # Use environment variable
method = "post"

# Bearer token authentication - sets bearer prefix on token automatically.
[sinks.runreveal.auth]
strategy = "bearer"
token = "${YOUR_BEARER_TOKEN}"  # Use environment variable for security - Bearer prefix is not needed for environment variable. 

[sinks.runreveal.encoding]
codec = "json"

[sinks.runreveal.request]
timeout_secs = 30
```

**Set environment variables before running Vector:**

```bash copy
# Set your webhook URL and bearer token
export YOUR_WEBHOOK_URL="https://api.runreveal.com/sources/hook/YOUR_WEBHOOK_ID"
export YOUR_BEARER_TOKEN="your-secret-bearer-token-here"

# Test authentication with curl (optional)
curl -H "Authorization: Bearer ${YOUR_BEARER_TOKEN}" \
     -H "Content-Type: application/json" \
     -X POST \
     -d '[{"test":"event"}]' \
     ${YOUR_WEBHOOK_URL}
```

  </Tabs.Tab>
</Tabs>

<Callout type="info">
**Authentication Notes:**
- Export YOUR_WEBHOOK_URL as an environment variable instead of adding the url directly to the config.
- Use bearer token authentication only if your RunReveal webhook requires it
- Always use environment variables for sensitive data like tokens
- Never commit authentication tokens to version control
- Bearer auth support requires Vector v0.9.0 or later ([see documentation](https://vector.dev/highlights/2020-05-20-add-bearer-auth-strategy/))
</Callout>

### Step 5: Start Vector

This step starts Vector with your configuration, which will begin monitoring the log files and forwarding events to RunReveal in real-time.

```bash copy
# Make sure you're in the vector directory where the config file is located
cd vector

# Validate configuration
vector validate vector.toml

# Run Vector in foreground
vector --config vector.toml

# Or run in background
vector --config vector.toml --quiet &
```

### Step 6: Verify Delivery in RunReveal

- Return to **Sources** in RunReveal and open your `Vector` Webhook source card.
- Confirm the **Last Event** timestamp and recent volume.

Click **Query** to explore incoming logs. Start with the sourceID which corresponds to the source id found on each source card on the sources page to only view logs from this source:

```sql copy
SELECT *
FROM {table:Identifier}
WHERE ({tsColumn:Identifier} >= now() - INTERVAL 1 HOUR) 
 AND ({tsColumn:Identifier} < now()) 
 AND ((sourceID = 'WEBHOOK_SOURCE_ID'))
LIMIT 10
```
</Steps>

---

## Vector Configuration

<Tabs items={['Sources', 'Transforms', 'Sinks']}>
  <Tabs.Tab>

### Sources

Sources collect data from various inputs. For RunReveal, you'll typically use file sources or system sources. See the [Vector Sources Reference](https://vector.dev/docs/reference/configuration/sources/) for comprehensive documentation.

**File Source Example**
```toml copy
[sources.application_logs]
type = "file"
include = ["/var/log/app/*.log", "/var/log/api/*.json"]
read_from = "beginning"
```

Collects application logs in JSON format, perfect for security event analysis and compliance reporting.

**System Source Example**
```toml copy
[sources.system_logs]
type = "journald"
include_units = ["ssh", "sudo", "audit"]
```

Captures system authentication and authorization events, essential for security monitoring and threat detection.

**Docker Source Example**
```toml copy
[sources.container_logs]
type = "docker_logs"
include_images = ["nginx", "postgres", "redis"]
```

Monitors containerized applications for security incidents, performance issues, and compliance violations.

  </Tabs.Tab>
  <Tabs.Tab>

### Transforms

Transforms modify and enrich your data. These are crucial for preparing data for RunReveal's analysis. See the [Vector Transforms Reference](https://vector.dev/docs/reference/configuration/transforms/) for comprehensive documentation.

**Add Metadata Transform**
```toml copy
[transforms.add_runreveal_metadata]
type = "remap"
inputs = ["application_logs"]
source = '''
.host = get_hostname!()
.ingestion_timestamp = now()
.environment = get_env_var("ENVIRONMENT") ?? "production"
.service = "web-application"
'''
```

Adds essential context for security analysis, making it easier to correlate events across different systems and environments.

**Parse JSON Transform**
```toml copy
[transforms.parse_json_logs]
type = "remap"
inputs = ["application_logs"]
source = '''
if is_string(.message) {
  . = merge(., parse_json(.message) ?? {})
}
'''
```

Extracts structured data from log messages, enabling advanced filtering, searching, and alerting based on specific event attributes.

**Filter Transform**
```toml copy
[transforms.filter_security_events]
type = "remap"
inputs = ["application_logs"]
source = '''
. = if .eventName == "UserLogin" || .eventName == "FileAccess" || .eventName == "DataExport" {
  .
} else {
  null
}
'''
```

Focuses on security-relevant events, reducing noise and improving detection accuracy while optimizing data transfer costs.

  </Tabs.Tab>
  <Tabs.Tab>

### Sinks

Sinks send processed data to external systems. For RunReveal, you'll use the HTTP sink. See the [Vector Sinks Reference](https://vector.dev/docs/reference/configuration/sinks/) for comprehensive documentation.

**HTTP Sink for RunReveal**
```toml copy
[sinks.runreveal_webhook]
type = "http"
inputs = ["add_runreveal_metadata"]
uri = "https://api.runreveal.com/sources/hook/YOUR_WEBHOOK_URL"
method = "post"
encoding.codec = "json"
compression = "gzip"

[sinks.runreveal_webhook.request]
timeout_secs = 30
headers.Content-Type = "application/json"

[sinks.runreveal_webhook.buffer]
type = "disk"
max_size = 104857600  # 100MB
when_full = "block"
```

Ensures reliable delivery of security events with compression for efficiency and disk buffering for resilience during network issues.

**Multiple Sink Example**
```toml copy
[sinks.runreveal_structured]
type = "http"
inputs = ["filter_security_events"]
uri = "https://api.runreveal.com/sources/hook/YOUR_WEBHOOK_URL"
method = "post"
encoding.codec = "json"

[sinks.runreveal_generic]
type = "http"
inputs = ["application_logs"]
uri = "https://api.runreveal.com/sources/hook/YOUR_WEBHOOK_URL"
method = "post"
encoding.codec = "json"
```

Routes different types of events to appropriate webhook types, optimizing for both structured analysis and flexible data collection.

  </Tabs.Tab>
</Tabs>

---

## Next Steps

Now that you have Vector configured and logs flowing to RunReveal, explore the detailed configuration guides:

- **[Detections](/detections)** - Create and manage security detection rules
- **[Sigma Streaming](/detections/sigma-streaming)** - Use Sigma rules for standardized threat detection
- **[Detection as Code](/detections/detection-as-code)** - Manage detections through code and version control
- **[Notifications](/notifications)** - Set up alerting and notification channels
- **[AI Chat](/ai-chat)** - Use AI-powered analysis for threat hunting and investigation
- **[Enrichments](/enrichments)** - Add context and metadata to your security events
- **[Filters](/logs/filtering)** - Create custom filters to focus on specific security events
- **[Pipelines](/logs/pipelines)** - Build data processing pipelines for complex workflows

---

## Troubleshooting

### Vector Won't Start

1. **Check Configuration Syntax**
   ```bash copy
   vector validate vector.toml
   ```

2. **Verify File Permissions**
   - Ensure Vector has read access to log files
   - Check that Vector can write to its working directory

3. **Review Vector Logs**
   ```bash copy
   vector --config vector.toml --log-level debug
   ```

### Logs Not Reaching RunReveal

1. **Verify Webhook URL**
   - Check that the webhook URL is correct and active
   - Ensure the URL includes the full path from RunReveal

2. **Test Network Connectivity**
   ```bash copy
   curl -X POST https://api.runreveal.com/sources/hook/YOUR_WEBHOOK_URL \
     -H "Content-Type: application/json" \
     -d '{"test": "message"}'
   ```

3. **Check Vector Sink Configuration**
   - Verify the HTTP sink is properly configured
   - Check for any authentication requirements

### High Resource Usage

1. **Optimize Buffer Settings**
   - Adjust buffer size and flush intervals
   - Consider using disk buffers for high-volume data

### Data Format Issues

1. **Check Log Format**
   - Ensure logs are in the expected format (JSON, syslog, etc.)

2. **Review Transform Rules**
   - Check that remap transforms are correctly parsing data
   - Verify field mappings match your log structure

3. **Test with Sample Data**
   - Use Vector's `vector test` command to validate transforms
   - Check output format before sending to RunReveal

## Resources

* [Vector Official Documentation](https://vector.dev/docs/)