---
title: "Reveald"
description: "RunReveal's official log collection agent"
---

import { Callout, Tabs, Steps } from 'nextra/components'

# Reveald Log Forwarder

[Reveald](https://github.com/reveald/reveald) is RunReveal's official lightweight log collection agent that can collect, transform, and route logs to RunReveal with high performance and minimal resource usage.

The host-level Reveald source provides the ability to ingest logs from hosts and enables log normalization through Transforms and SQL JSON parsing functions.

![Reveald Setup](/forwarders-reveald-1.png)

## Quick Start

This setup demonstrates reading logs from a local file and forwarding them to your RunReveal webhook. The example creates test JSON logs, configures Reveald to monitor the log file, and sends events to RunReveal in real-time.

<Steps>

### Step 1: Create a Reveald Source in RunReveal

This step creates a Reveald source in RunReveal and generates the webhook URL you'll need for Reveald configuration.

1. **Navigate to RunReveal**: Go to your RunReveal dashboard
2. **Create Source**: Click on "Sources" in the left sidebar
3. **Add Reveald Source**: Create a source for "Reveald" from the source types
4. **Configure**: Give your Reveald source a name and description
5. **Copy URL**: Copy the generated webhook URL to use in your configuration. (It's always available after you save the source)

<Callout type="info">
The Reveald source type provides host-level log ingestion capabilities with built-in normalization through Transforms and SQL JSON parsing functions, making it ideal for collecting and processing logs from various host systems.
</Callout>

### Step 2: Install Reveald

This step installs Reveald on your system using your preferred method. Reveald will be used to collect, process, and forward logs to RunReveal.

<Tabs items={['macOS', 'Ubuntu/Debian', 'CentOS/RHEL', 'Docker', 'Binary']}>
  <Tabs.Tab>
```bash
# Install via Homebrew
brew install reveald

# Verify installation
reveald --version
```
  </Tabs.Tab>
  <Tabs.Tab>
```bash
# Download Reveald binary
curl -L -O https://github.com/reveald/reveald/releases/latest/download/reveald-linux-amd64
sudo mv reveald-linux-amd64 /usr/local/bin/reveald
sudo chmod +x /usr/local/bin/reveald

# Verify installation
reveald --version
```
  </Tabs.Tab>
  <Tabs.Tab>
```bash
# Download Reveald binary
curl -L -O https://github.com/reveald/reveald/releases/latest/download/reveald-linux-amd64
sudo mv reveald-linux-amd64 /usr/local/bin/reveald
sudo chmod +x /usr/local/bin/reveald

# Verify installation
reveald --version
```
  </Tabs.Tab>
  <Tabs.Tab>
```bash
# Pull Reveald image
docker pull reveald/reveald:latest

# Create config directory
mkdir -p $(pwd)/reveald-config

# Run Reveald container
docker run -d \
  --name reveald \
  -v $(pwd)/reveald-config:/etc/reveald \
  -v /var/log:/var/log:ro \
  reveald/reveald:latest

# Verify container is running
docker ps | grep reveald
```
  </Tabs.Tab>
  <Tabs.Tab>
```bash
# Download Reveald binary
curl -L -O https://github.com/reveald/reveald/releases/latest/download/reveald-linux-amd64
chmod +x reveald-linux-amd64
./reveald-linux-amd64 --version
```
  </Tabs.Tab>
</Tabs>

### Step 3: Create Test Logs

This step creates sample log files with security events that Reveald will monitor and forward to RunReveal. These logs simulate real application events for testing purposes.

<Tabs items={['macOS/Linux', 'Windows']}>
  <Tabs.Tab>
```bash
# Create logs directory
mkdir -p logs

# Create test log file
cat > logs/app.log << 'EOF'
{"eventTime": "'$(date -Iseconds)'", "eventName": "UserLogin", "action": "authentication", "actor": {"username": "john.doe", "userAgent": "Mozilla/5.0"}, "src": {"ip": "192.168.1.100"}, "outcome": "success", "service": "web-api"}
{"eventTime": "'$(date -Iseconds)'", "eventName": "FileAccess", "action": "file_read", "actor": {"username": "jane.smith"}, "object": {"path": "/secure/documents/report.pdf"}, "outcome": "allowed", "service": "file-server"}
EOF

# Verify log file was created
ls -la logs/
```
  </Tabs.Tab>
  <Tabs.Tab>
```powershell
# Create logs directory
mkdir C:\logs

# Create test log file
echo {"eventTime": "2024-01-01T12:00:00Z", "eventName": "UserLogin", "action": "authentication", "actor": {"username": "john.doe", "userAgent": "Mozilla/5.0"}, "src": {"ip": "192.168.1.100"}, "outcome": "success", "service": "web-api"} > C:\logs\app.log
echo {"eventTime": "2024-01-01T12:01:00Z", "eventName": "FileAccess", "action": "file_read", "actor": {"username": "jane.smith"}, "object": {"path": "/secure/documents/report.pdf"}, "outcome": "allowed", "service": "file-server"} >> C:\logs\app.log

# Verify log file was created
dir C:\logs\
```
  </Tabs.Tab>
</Tabs>

### Step 4: Configure Reveald

This step creates the Reveald configuration file that tells Reveald where to find logs and how to send them to RunReveal. The configuration defines both the sources (where logs come from) and the destinations (where logs go).

<Tabs items={['JSON Config', 'Docker Config']}>
  <Tabs.Tab>
Create `reveald.json`:

```json
{
  "sources": {
    "application_logs": {
      "type": "file",
      "path": "./logs/*.log",
      "extension": ".log"
    },
    "system_logs": {
      "type": "journald"
    }
  },
  "destinations": {
    "runreveal": {
      "type": "runreveal",
      "webhookURL": "https://api.runreveal.com/sources/hook/YOUR_REVEALD_WEBHOOK_URL"
    }
  }
}
```
  </Tabs.Tab>
  <Tabs.Tab>
Create `docker-compose.yml`:

```yaml
version: '3.8'
services:
  reveald:
    image: reveald/reveald:latest
    container_name: reveald
    volumes:
      - ./reveald.json:/etc/reveald/config.json
      - ./logs:/var/log/app:ro
      - /var/log:/var/log:ro
    ports:
      - "8080:8080"
    environment:
      - HOSTNAME=localhost
    command: reveald run --config=/etc/reveald/config.json
```
  </Tabs.Tab>
</Tabs>

<Callout type="warning">
Replace `YOUR_REVEALD_WEBHOOK_URL` with your actual RunReveal Reveald webhook URL from Step 1.
</Callout>

### Step 5: Start Reveald

This step starts Reveald with your configuration, which will begin monitoring the log files and forwarding events to RunReveal in real-time. Reveald will continuously watch for new log entries and send them to your webhook.

<Tabs items={['Local', 'Docker']}>
  <Tabs.Tab>
```bash
# Test configuration
reveald run --config=reveald.json --validate

# Run Reveald
reveald run --config=reveald.json
```
  </Tabs.Tab>
  <Tabs.Tab>
```bash
# Start with Docker Compose
docker-compose up -d

# Check logs
docker-compose logs -f reveald
```
  </Tabs.Tab>
</Tabs>

### Step 6: Validate Delivery

This step verifies that logs are being successfully delivered to RunReveal by checking the Reveald source and querying for events.

1. **Check Reveald Source**: Go to RunReveal → Sources → Your Reveald Source
2. **View Recent Events**: Look for incoming events in the source details
3. **Query for Events**: Use the search bar to query `sourceType = 'reveald'`
4. **Verify Data**: Confirm that your test log events appear in the results

If you see your test events in RunReveal, Reveald is successfully forwarding logs to your webhook.

</Steps>

## Reveald Configuration

<Tabs items={['Sources', 'Transforms', 'Destinations']}>
  <Tabs.Tab>

### Sources

Sources collect data from various inputs. For RunReveal, you'll typically use file sources or system sources. See the [Reveald Sources Documentation](https://github.com/reveald/reveald) for comprehensive documentation.

**File Source Example**
```json
{
  "sources": {
    "application_logs": {
      "type": "file",
      "path": "/var/log/app/*.log",
      "extension": ".log"
    }
  }
}
```

Collects application logs in JSON format, perfect for security event analysis and compliance reporting.

**Journald Source Example**
```json
{
  "sources": {
    "system_logs": {
      "type": "journald"
    }
  }
}
```

Captures system authentication and authorization events, essential for security monitoring and threat detection.

**Command Source Example**
```json
{
  "sources": {
    "custom_script": {
      "type": "command",
      "cmd": "/usr/local/bin/security-check.sh",
      "args": ["--format=json"],
      "interval": "30s"
    }
  }
}
```

Runs custom security scripts and collects their output, enabling integration with existing security tools and workflows.

  </Tabs.Tab>
  <Tabs.Tab>

### Transforms

Transforms modify and enrich your data. These are crucial for preparing data for RunReveal's analysis. See the [Reveald Transforms Documentation](https://github.com/reveald/reveald) for comprehensive documentation.

**Add Metadata Transform**
```json
{
  "sources": {
    "application_logs": {
      "type": "file",
      "path": "./logs/*.log"
    }
  },
  "transforms": {
    "add_metadata": {
      "type": "add_fields",
      "fields": {
        "host": "${HOSTNAME}",
        "ingestion_timestamp": "${TIMESTAMP}",
        "environment": "production",
        "service": "web-application"
      }
    }
  }
}
```

Adds essential context for security analysis, making it easier to correlate events across different systems and environments.

**Parse JSON Transform**
```json
{
  "transforms": {
    "parse_json": {
      "type": "parse_json",
      "field": "message",
      "target": "parsed_data"
    }
  }
}
```

Extracts structured data from log messages, enabling advanced filtering, searching, and alerting based on specific event attributes.

**Filter Transform**
```json
{
  "transforms": {
    "filter_security_events": {
      "type": "filter",
      "condition": "eventName in ['UserLogin', 'FileAccess', 'DataExport']"
    }
  }
}
```

Focuses on security-relevant events, reducing noise and improving detection accuracy while optimizing data transfer costs.

  </Tabs.Tab>
  <Tabs.Tab>

### Destinations

Destinations send processed data to external systems. For RunReveal, you'll use the runreveal destination. See the [Reveald Destinations Documentation](https://github.com/reveald/reveald) for comprehensive documentation.

**RunReveal Destination**
```json
{
  "destinations": {
    "runreveal": {
      "type": "runreveal",
      "webhookURL": "https://api.runreveal.com/sources/hook/YOUR_REVEALD_WEBHOOK_URL",
      "batchSize": 1000,
      "timeout": "30s"
    }
  }
}
```

Ensures reliable delivery of security events with proper batching and timeout settings for optimal performance.

**Multiple Destination Example**
```json
{
  "destinations": {
    "runreveal_primary": {
      "type": "runreveal",
      "webhookURL": "https://api.runreveal.com/sources/hook/YOUR_REVEALD_WEBHOOK_URL"
    },
    "s3_archive": {
      "type": "s3",
      "bucketName": "security-logs-archive",
      "bucketRegion": "us-west-2",
      "pathPrefix": "logs/"
    }
  }
}
```

Routes different types of events to appropriate destinations, optimizing for both real-time analysis and long-term archival.

  </Tabs.Tab>
</Tabs>

## Log Normalization

The Reveald source provides built-in log normalization capabilities through:

**SQL JSON Parsing Functions**
```sql
-- Extract specific fields from JSON logs
SELECT 
  JSONExtractString(rawLog, 'eventName') as eventName,
  JSONExtractString(rawLog, 'actor.username') as username,
  JSONExtractString(rawLog, 'src.ip') as sourceIP,
  receivedAt
FROM logs 
WHERE sourceType = 'reveald'
  AND receivedAt BETWEEN {from:DateTime} AND {to:DateTime}
```

**Transform Integration**
- Automatically normalizes log formats
- Enriches events with host metadata
- Provides consistent field mapping across different log sources

---

## Next Steps

Now that you have Reveald configured and logs flowing to RunReveal, explore the detailed configuration guides:

- **[Detections](/detections)** - Create and manage security detection rules
- **[Sigma Streaming](/detections/sigma-streaming)** - Use Sigma rules for standardized threat detection
- **[Detection as Code](/detections/detection-as-code)** - Manage detections through code and version control
- **[Notifications](/notifications)** - Set up alerting and notification channels
- **[AI Chat](/ai-chat)** - Use AI-powered analysis for threat hunting and investigation
- **[Enrichments](/enrichments)** - Add context and metadata to your security events
- **[Filters](/filtering)** - Create custom filters to focus on specific security events
- **[Pipelines](/pipelines)** - Build data processing pipelines for complex workflows

---

## Troubleshooting

### Reveald Won't Start

1. **Check Configuration Syntax**
   ```bash
   reveald run --config=reveald.json --validate
   ```

2. **Verify File Permissions**
   - Ensure Reveald has read access to log files
   - Check that Reveald can write to its working directory

3. **Review Reveald Logs**
   ```bash
   reveald run --config=reveald.json --log-level debug
   ```

### Logs Not Reaching RunReveal

1. **Verify Webhook URL**
   - Check that the Reveald webhook URL is correct and active
   - Ensure the URL includes the full path from RunReveal

2. **Test Network Connectivity**
   ```bash
   curl -X POST https://api.runreveal.com/sources/hook/YOUR_REVEALD_WEBHOOK_URL \
     -H "Content-Type: application/json" \
     -d '{"test": "message"}'
   ```

3. **Check Reveald Destination Configuration**
   - Verify the runreveal destination is properly configured
   - Check for any authentication requirements

### High Resource Usage

1. **Optimize Batch Settings**
   - Adjust batch size and flush intervals
   - Consider using disk buffers for high-volume data

2. **Review Transform Complexity**
   - Simplify complex transform chains
   - Use filtering to reduce data volume

3. **Monitor System Resources**
   ```bash
   top -p $(pgrep reveald)
   ```

### Data Format Issues

1. **Check Log Format**
   - Ensure logs are in the expected format (JSON, syslog, etc.)

2. **Review Transform Rules**
   - Check that transforms are correctly parsing data
   - Verify field mappings match your log structure

3. **Test with Sample Data**
   - Use Reveald's `--validate` flag to validate configuration
   - Check output format before sending to RunReveal

## Resources

* [Reveald GitHub Repository](https://github.com/reveald/reveald)
* [Reveald Documentation](https://github.com/reveald/reveald)
